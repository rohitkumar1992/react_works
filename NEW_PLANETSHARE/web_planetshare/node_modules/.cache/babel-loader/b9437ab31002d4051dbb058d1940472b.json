{"ast":null,"code":"var _jsxFileName = \"/var/www/html/REACT_WORK/NEW_PLANETSHARE/web_planetshare/src/Container/Search/search.js\";\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { TAG, SEARCH, color_code } from '../../url';\nimport axios from 'axios';\nimport Not_Found from '../../Component/not_found/not_found';\nimport LoadingGif from '../../Component/Loader/loading_gif';\nimport cogoToast from 'cogo-toast';\nimport Share from '../Share/Share';\nimport WordWrap from '../../Component/wordwrap';\nimport $ from 'jquery';\n\nclass Search extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      keyword: '',\n      isLoading: false,\n      not_found: false,\n      searchType: '',\n      searchresult: [],\n      loading_msg: 'Please Wait',\n      total_result: 0\n    };\n\n    this.getData = () => {\n      axios.post(SEARCH, {\n        'user_id': localStorage.getItem('user_id'),\n        'search': this.state.keyword,\n        'limit': 100,\n        'tag': TAG,\n        'type': this.state.searchType\n      }).then(res => {\n        if (res.data.success == 1) {\n          var response = res.data.data;\n          this.setState({\n            searchresult: response.data,\n            total_result: response.total\n          });\n          setTimeout(() => this.setState({\n            isLoading: true\n          }), 1000);\n        }\n      }).catch(error => {\n        this.setState({\n          not_found: true\n        });\n      });\n    };\n\n    this.createMarkup = desc => {\n      return {\n        __html: desc\n      };\n    };\n  }\n\n  componentDidMount() {\n    this.setState({\n      keyword: this.props.match.params.keyword,\n      searchType: this.props.match.params.searchType\n    }, function () {\n      this.getData();\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.props.match.params.keyword != this.state.keyword || this.props.match.params.searchType != this.state.searchType) {\n      this.setState({\n        keyword: this.props.match.params.keyword,\n        searchType: this.props.match.params.searchType,\n        isLoading: false,\n        not_found: false\n      }, function () {\n        this.getData();\n      });\n    }\n  }\n\n  render() {\n    const _this$state = this.state,\n          isLoading = _this$state.isLoading,\n          not_found = _this$state.not_found,\n          searchresult = _this$state.searchresult,\n          loading_msg = _this$state.loading_msg,\n          total_result = _this$state.total_result,\n          keyword = _this$state.keyword;\n\n    if (!not_found) {\n      const SearchResult = searchresult.length > 0 && searchresult.map((result, key) => {\n        return React.createElement(\"div\", {\n          class: \"item\",\n          style: {\n            backgroundColor: color_code[Math.floor(Math.random() * color_code.length)]\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: result.tag == \"image\" ? `/web/image/${result.title.replace(/[&\\/\\\\#, +()$~%.'\":*?<>{}]/g, '').toLowerCase()}/${result.id}` : `/web/video/${result.title.replace(/[&\\/\\\\#, +()$~%.'\":*?<>{}]/g, '').toLowerCase()}/${result.id}`,\n          class: \"box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"img\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          class: \"load_place_vert1\",\n          src: result.large_thumb,\n          alt: \"\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }), React.createElement(\"span\", {\n          class: \"pendng\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, React.createElement(\"em\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, result.tag == \"image\" ? \"Image\" : \"Video\"))), React.createElement(\"div\", {\n          class: \"desc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          class: \"title\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, result.title.replace(/^(.{8}[^\\s]*).*/, \"$1\")), React.createElement(\"div\", {\n          class: \"det\",\n          dangerouslySetInnerHTML: this.createMarkup(result.short_desc),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }))));\n      });\n\n      if (isLoading) {\n        return React.createElement(\"section\", {\n          class: \"inner_cont top_div\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        }, React.createElement(\"article\", {\n          class: \"cat_gal_wrap ver_cat\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"search_key\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, \"Search Keyword:\"), \" \", this.state.keyword)), React.createElement(\"aside\", {\n          class: \"cat_gal_head\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, searchresult.length > 0 && React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, \"Total Result Found :\", total_result), searchresult.length == 0 && React.createElement(\"h2\", {\n          class: \"s_noresult\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: \"images/no_result.gif\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          class: \"ver_cat_list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, SearchResult), React.createElement(\"div\", {\n          class: \"clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }))));\n      } else {\n        return React.createElement(LoadingGif, {\n          message: loading_msg,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        });\n      }\n    } else {\n      return React.createElement(Not_Found, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default Search;","map":{"version":3,"sources":["/var/www/html/REACT_WORK/NEW_PLANETSHARE/web_planetshare/src/Container/Search/search.js"],"names":["React","Link","TAG","SEARCH","color_code","axios","Not_Found","LoadingGif","cogoToast","Share","WordWrap","$","Search","Component","state","keyword","isLoading","not_found","searchType","searchresult","loading_msg","total_result","getData","post","localStorage","getItem","then","res","data","success","response","setState","total","setTimeout","catch","error","createMarkup","desc","__html","componentDidMount","props","match","params","componentDidUpdate","render","SearchResult","length","map","result","key","backgroundColor","Math","floor","random","tag","title","replace","toLowerCase","id","large_thumb","short_desc"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Link} from 'react-router-dom';\nimport {TAG,SEARCH,color_code} from '../../url';\nimport axios from 'axios';\nimport Not_Found from '../../Component/not_found/not_found';\nimport LoadingGif from '../../Component/Loader/loading_gif'\nimport cogoToast from 'cogo-toast';\nimport Share from '../Share/Share';\nimport WordWrap from '../../Component/wordwrap';\nimport $ from 'jquery'\nclass Search extends React.Component{\n  state={keyword:'',isLoading:false,not_found:false,searchType:'',searchresult:[],loading_msg:'Please Wait',total_result:0}\n  componentDidMount()\n  {\n    this.setState({keyword:this.props.match.params.keyword,searchType:this.props.match.params.searchType},\n    function(){\n      this.getData();\n    })\n  }\n  componentDidUpdate()\n  {\n    if(this.props.match.params.keyword!=this.state.keyword || this.props.match.params.searchType!=this.state.searchType)\n    {\n      this.setState({keyword:this.props.match.params.keyword,searchType:this.props.match.params.searchType,isLoading:false,not_found:false},\n      function(){\n        this.getData();\n      })\n   }\n  }\n  getData=()=>{\n    axios.post(SEARCH,{\n      'user_id':localStorage.getItem('user_id'),\n      'search':this.state.keyword,\n      'limit':100,\n      'tag':TAG,\n      'type':this.state.searchType,\n    }).then((res)=>{\n      if(res.data.success==1)\n      {\n        var response=res.data.data;\n        this.setState({searchresult:response.data,total_result:response.total});\n         setTimeout(()=>this.setState({isLoading:true}),1000);\n      }\n    }).catch((error)=>{\n      this.setState({not_found:true})\n    })\n  }\n  createMarkup=(desc)=> {\n  return {__html: desc};\n}\n  render()\n  {\n  const {isLoading,not_found,searchresult,loading_msg,total_result,keyword}=this.state;\n  if(!not_found)\n    {\n    const SearchResult=(searchresult.length>0 && searchresult.map((result,key)=>{\n      return(<div class=\"item\" style={{backgroundColor:color_code[Math.floor(Math.random()*color_code.length)]}}>\n                    <Link to={result.tag==\"image\"?`/web/image/${(result.title.replace(/[&\\/\\\\#, +()$~%.'\":*?<>{}]/g,'')).toLowerCase()}/${result.id}`:`/web/video/${(result.title.replace(/[&\\/\\\\#, +()$~%.'\":*?<>{}]/g,'')).toLowerCase()}/${result.id}`} class=\"box\">\n                        <div class=\"img\" >\n                            <img class=\"load_place_vert1\" src={result.large_thumb} alt=\"\"/>\n                            <span class=\"pendng\"><em>{result.tag==\"image\"?\"Image\":\"Video\"}</em></span>\n                        </div>\n                        <div class=\"desc\">\n                            <span class=\"title\">{result.title.replace(/^(.{8}[^\\s]*).*/, \"$1\")}</span>\n                            <div class=\"det\" dangerouslySetInnerHTML={this.createMarkup(result.short_desc)}></div>\n                        </div>\n                    </Link>\n                </div>)\n              }))\n      if(isLoading)\n      {\n    return(<section class=\"inner_cont top_div\">\n      <div class=\"container\">\n        <article class=\"cat_gal_wrap ver_cat\" >\n        <div class=\"search_key\">\n          <h2><span>Search Keyword:</span> {this.state.keyword}</h2>\n        </div>\n        <aside class=\"cat_gal_head\">\n          {searchresult.length>0 && <h2>Total Result Found :{total_result}</h2>}\n          {searchresult.length==0 && <h2 class=\"s_noresult\"><img src=\"images/no_result.gif\"/></h2>}\n        </aside>\n        <div class=\"ver_cat_list\">{SearchResult}</div>\n        <div class=\"clearfix\"></div>\n      </article></div></section>)\n     }\n     else\n      {\n         return(<LoadingGif message={loading_msg}/>);\n      }\n   }\n   else {\n     return(<Not_Found/>)\n   }\n  }\n}\nexport default Search\n"]},"metadata":{},"sourceType":"module"}
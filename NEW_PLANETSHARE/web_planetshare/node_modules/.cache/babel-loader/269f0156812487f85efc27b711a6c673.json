{"ast":null,"code":"var _jsxFileName = \"/var/www/html/REACT_WORK/NEW_PLANETSHARE/web_planetshare/src/Container/Dashboard/SellerDashboard/Bidding/MediaUploads.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport { USERID, TAG, HEADER, BIDMEDIA, BIDEXIST } from '../../../../url';\nimport { Link, withRouter } from \"react-router-dom\";\nimport { History } from \"react-router\";\nimport Resumable from 'resumablejs';\nimport cogoToast from 'cogo-toast';\nimport Progress from '../Asset/progressbar';\nimport LoadingGif from '../../../../Component/Loader/loading_gif';\nimport Not_Found from '../../../../Component/not_found/not_found';\nimport { ToastContainer, toast, cssTransition } from 'react-toastify';\nconst Zoom = cssTransition({\n  enter: 'zoomIn',\n  exit: 'zoomOut',\n  duration: 750\n});\nconst SELLER_HEADER = {\n  headers: {\n    'Content-Type': 'multipart/form-data',\n    'Authorization': \"Bearer \" + localStorage.getItem('planetshare_web_token')\n  }\n};\nconst uploadPercentage = '0%';\n\nclass MediaUpload extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      percentage: '',\n      video_id: '',\n      showTable: false,\n      tableContent: [],\n      nextComponent: false,\n      email: '',\n      not_found: false,\n      tag: '',\n      loading: false,\n      loading_msg: 'Please Wait',\n      btn_disable: true,\n      bid_id: '',\n      embed_url: false,\n      embed_btn: false\n    };\n\n    this.getStatus = () => {\n      axios.post(BIDEXIST, {\n        status_type: 'media',\n        bid_id: this.state.bid_id,\n        user_id: localStorage.getItem('user_id'),\n        tag: TAG,\n        seller_id: localStorage.getItem('seller_id')\n      }, {\n        headers: {\n          'Authorization': \"Bearer \" + localStorage.getItem('planetshare_web_token')\n        }\n      }).then((res, key) => {\n        if (res.data.success == 1) {\n          this.setState({\n            loading: true\n          }, function () {\n            this.getUpload();\n          });\n        } else {\n          this.setState({\n            not_found: true\n          });\n        }\n      }).catch(error => {});\n    };\n\n    this.getUpload = () => {\n      var $ = window.$; // use the global jQuery instance\n\n      var tag = this.props.tag;\n      this.setState({\n        tag: tag\n      });\n      var $fileUpload = $('#resumable-browse');\n      $('#start-upload-btn').hide();\n      $('#pause-upload-btn').hide();\n      $('#cancel-upload-btn').hide();\n      var $fileUploadDrop = $('#resumable-drop');\n      var $uploadList = $(\"#file-upload-list\");\n\n      if ($fileUpload.length > 0 && $fileUploadDrop.length > 0) {\n        var resumable = new Resumable({\n          // Use chunk size that is smaller than your maximum limit due a resumable issue\n          // https://github.com/23/resumable.js/issues/51\n          chunkSize: 5 * 1024 * 1024,\n          // 1MB\n          // fileType: ['mp4','3gp','avi','flv'],\n          fileType: ['3gp', 'mp4', 'flv'],\n          simultaneousUploads: 1,\n          testChunks: false,\n          throttleProgressCallbacks: 1,\n          maxFiles: 1,\n          // Get the url from data-url tag\n          target: $fileUpload.data('url'),\n          // Append token to the request - required for web routes\n          headers: {\n            'Authorization': \"Bearer \" + localStorage.getItem('planetshare_web_token')\n          },\n          query: {\n            _token: $('input[name=_token]').val(),\n            media_type: 'upload',\n            bid_id: this.state.bid_id,\n            tag: TAG,\n            seller_id: localStorage.getItem('seller_id'),\n            user_id: localStorage.getItem('user_id')\n          },\n\n          maxFilesErrorCallback(files, errorCount) {\n            console.log(errorCount);\n          },\n\n          maxFileSizeErrorCallback(file, errorCount) {\n            console.log(errorCount);\n          }\n\n        }); // Resumable.js isn't supported, fall back on a different method\n\n        $('#resumable-browse').click(function () {\n          $('#dubbing_cont').addClass('collapsed');\n          $('#dubbing_upload_button').removeClass('show');\n        });\n\n        if (!resumable.support) {\n          $('#resumable-error').show();\n        } else {\n          // Show a place for dropping/selecting files\n          $fileUploadDrop.show();\n          resumable.assignDrop($fileUpload[0]);\n          resumable.assignBrowse($fileUploadDrop[0]); // Handle file add event\n\n          resumable.on('fileAdded', function (file) {\n            // Show progress pabr\n            $fileUpload.hide();\n            $uploadList.show();\n            $('#progress_bar_status').show();\n            $('#file_upload_button').hide(); // $('#start-upload-btn').show();\n\n            $('#pause-upload-btn').show();\n            $('#cancel-upload-btn').show(); // Show pause, hide resume\n\n            $('.resumable-progress .progress-resume-link').hide();\n            $('.resumable-progress .progress-pause-link').show(); // Add the file to the list\n\n            $uploadList.append('<li class=\"resumable-file-' + file.uniqueIdentifier + '\">Uploading <span class=\"resumable-file-name\"></span> <span class=\"resumable-file-progress\"></span>');\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-name').html(file.fileName); // Actually start the upload\n            // console.log(file);\n\n            resumable.upload();\n          });\n          resumable.on('fileSuccess', function (file, message) {\n            var result = JSON.parse(message);\n            $('#video_id').val(result.video_id);\n            $('#start-upload-btn').hide();\n            $('#pause-upload-btn').hide();\n            $('#cancel-upload-btn').hide();\n            $('#progress_bar_status').hide();\n            $('#file_upload_button').show();\n            $('#progress_bar_status').hide();\n            $('#save_button').show();\n            $fileUpload.show(); // Reflect that the file upload has completed\n\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(completed)');\n          });\n          resumable.on('fileError', function (file, message) {\n            // Reflect that the file upload has resulted in error\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(file could not be uploaded: ' + message + ')');\n          });\n          resumable.on('fileProgress', function (file) {\n            // Handle progress for both the file and the overall upload\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html(Math.floor(file.progress() * 100) + '%');\n            $('.progress-bar').css({\n              width: Math.floor(resumable.progress() * 100) + '%'\n            });\n            $('#hidden_percent').val(Math.floor(file.progress() * 100));\n            $('#show_percentage').html(Math.floor(file.progress() * 100) + '%'); // uploadPercentage=Math.floor(file.progress() * 100) + '%';\n            // this.setState({percentage:'10'});\n          });\n        }\n\n        $('#pause-upload-btn').click(function () {\n          $('#pause-upload-btn').hide();\n          $('#start-upload-btn').show();\n\n          if (resumable.files.length > 0) {\n            if (resumable.isUploading()) {\n              return resumable.pause();\n            }\n\n            return resumable.upload();\n          }\n        });\n        $('#start-upload-btn').click(function () {\n          $('#start-upload-btn').hide();\n          $('#pause-upload-btn').show();\n          resumable.upload();\n        });\n      }\n    };\n\n    this.redirectHandler = () => {\n      var video_id = document.getElementById('video_id').value; // alert(video_id);\n\n      if (video_id == '') {\n        return false;\n      } else {\n        this.setState({\n          video_id: video_id,\n          btn_disable: false\n        });\n        this.setState({\n          loading: true,\n          loading_msg: 'Saving Your Content'\n        }, function () {\n          setTimeout(() => {\n            cogoToast.success('Your content is under review', {\n              position: 'bottom-center'\n            });\n            this.props.history.push(`/dashboard/seller/bidding/bid_rights/${this.state.bid_id}`);\n          }, 1000);\n        });\n      }\n    };\n\n    this.submitEmbedUrl = e => {\n      e.preventDefault();\n      this.setState({\n        embed_btn: true\n      });\n      var video_url = e.target.embed_url.value.trim();\n\n      if (video_url == '') {\n        alert('Please Provide Url');\n        this.setState({\n          embed_btn: false\n        });\n        return false;\n      }\n\n      axios.post(BIDMEDIA, {\n        video_url: video_url,\n        seller_id: localStorage.getItem('seller_id'),\n        user_id: localStorage.getItem('user_id'),\n        media_type: 'embed',\n        bid_id: this.state.bid_id,\n        tag: TAG\n      }, {\n        headers: {\n          'Authorization': \"Bearer \" + localStorage.getItem('planetshare_web_token')\n        }\n      }).then(res => {\n        if (res.data.success == 1) {\n          this.setState({\n            embed_btn: false\n          });\n          this.setState({\n            loading: true,\n            loading_msg: 'Saving Your Content'\n          }, function () {\n            setTimeout(() => {\n              this.props.history.push(`/dashboard/seller/bidding/bid_rights/${this.state.bid_id}`);\n            }, 1000);\n          });\n        } else {\n          this.setState({\n            embed_btn: false,\n            loading: false,\n            loading_msg: 'Please Wait'\n          });\n        }\n      }).catch(error => {\n        this.setState({\n          embed_btn: false,\n          loading: false,\n          loading_msg: 'Please Wait'\n        });\n      });\n    };\n  }\n\n  componentWillMount() {\n    // this.props.history.push('',{ detail: 'user'});\n    // this.props.history.push({\n    //       pathname : '/dashboard/seller/asset',\n    //       state :{\n    //       tag :'video',\n    //       }\n    //       }\n    //     );\n    var email = localStorage.getItem('username');\n    this.setState({\n      email: email\n    });\n  }\n\n  componentDidMount() {\n    setTimeout(() => this.setState({\n      loading: true,\n      bid_id: this.props.match.params.bid_id\n    }, function () {\n      this.getStatus();\n    }), 1000);\n  }\n\n  componentDidUpdate() {\n    if (this.props.match.params.bid_id != this.state.bid_id) {\n      this.setState({\n        bid_id: this.props.match.params.bid_id,\n        loading: true,\n        not_found: false\n      }, function () {\n        this.getStatus();\n      });\n    }\n  }\n\n  pause() {\n    // Show resume, hide pause\n    $('.resumable-progress .progress-resume-link').show();\n    $('.resumable-progress .progress-pause-link').hide();\n  }\n\n  cancel() {\n    $('.resumable-file-progress').html('canceled');\n  }\n\n  render() {\n    const _this$state = this.state,\n          loading_msg = _this$state.loading_msg,\n          loading = _this$state.loading,\n          img_loading_msg = _this$state.img_loading_msg,\n          img_loading = _this$state.img_loading,\n          not_found = _this$state.not_found,\n          embed_url = _this$state.embed_url;\n\n    if (!not_found) {\n      if (loading) {\n        return React.createElement(\"section\", {\n          class: \"inner_cont upload_cont\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 269\n          },\n          __self: this\n        }, React.createElement(\"article\", {\n          class: \"gig_info\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 270\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"container\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"vend_cont\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"upl_tabs\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 273\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          class: \"btndefault active\",\n          onClick: () => this.setState({\n            embed_url: false\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 274\n          },\n          __self: this\n        }, \"Upload\"), React.createElement(\"button\", {\n          class: \"btndefault\",\n          onClick: () => this.setState({\n            embed_url: true\n          }),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 275\n          },\n          __self: this\n        }, \"Embed Url\")), !embed_url && React.createElement(\"form\", {\n          class: \"form_control\",\n          onSubmit: this.uploadImage,\n          enctype: \"multipart/formData\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 278\n          },\n          __self: this\n        }, \"Upload Your Content\"), React.createElement(\"div\", {\n          class: \"build_gal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 279\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"upload_area\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btn btn-warning\",\n          \"aria-label\": \"Pause upload\",\n          id: \"pause-upload-btn\",\n          style: {\n            display: \"none\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          class: \"glyphicon glyphicon-pause \",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }), \" Pause upload\"), React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btn btn-info\",\n          \"aria-label\": \"Start upload\",\n          id: \"start-upload-btn\",\n          style: {\n            display: \"none\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          class: \"glyphicon glyphicon-upload\",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }), \" Start upload\"), React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btn btn-warning\",\n          \"aria-label\": \"Pause upload\",\n          id: \"cancel-upload-btn\",\n          style: {\n            display: \"none\"\n          },\n          onClick: () => {\n            this.props.history.push('/dashboard/seller');\n            setTimeout(() => this.props.history.replace('/dashboard/seller/add_asset/video'), 1000);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          class: \"glyphicon glyphicon-pause \",\n          \"aria-hidden\": \"true\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 288\n          },\n          __self: this\n        }), \" Cancel upload\"), React.createElement(\"input\", {\n          type: \"hidden\",\n          id: \"video_id\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }), React.createElement(\"ul\", {\n          class: \"browse_list mult\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 291\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"upl_box\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          for: \"gallery-photo-add\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          id: \"resumable-drop\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          id: \"file_upload_button\",\n          class: \"mt-16\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          class: \"fileinput-button\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          class: \"glyphicon glyphicon-plus\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btndefault fileinput-button\",\n          id: \"resumable-browse\",\n          \"data-url\": `${BIDMEDIA}`,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 300\n          },\n          __self: this\n        }, \"Select Files\"))))), React.createElement(\"span\", {\n          class: \"note\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 305\n          },\n          __self: this\n        }, \"(.mp4,.3gp files that are at least 10Mb)\"), React.createElement(Progress, {\n          percent: this.state.percentage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 306\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          class: \"col-lg-offset-2 col-lg-12\",\n          id: \"progress_bar_status\",\n          style: {\n            display: 'none'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 307\n          },\n          __self: this\n        }, React.createElement(\"p\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 308\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          id: \"show_percentage\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310\n          },\n          __self: this\n        })))))))), React.createElement(\"div\", {\n          class: \"buttons\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 320\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"button\",\n          class: \"btndefault\",\n          id: \"upload_img_btn\",\n          onClick: () => this.redirectHandler(),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321\n          },\n          __self: this\n        }, \"Save\"))), embed_url && React.createElement(\"form\", {\n          class: \"form_control\",\n          onSubmit: this.submitEmbedUrl,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 324\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"fields embed\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 325\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          class: \"inputbox\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 326\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          name: \"embed_url\",\n          required: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 327\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          class: \"btndefault\",\n          type: \"submit\",\n          disabled: this.state.embed_btn,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 328\n          },\n          __self: this\n        }, \"Save\")))), React.createElement(\"div\", {\n          class: \"clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 332\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          class: \"clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 335\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          class: \"clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 337\n          },\n          __self: this\n        }));\n      } else {\n        return React.createElement(LoadingGif, {\n          message: loading_msg,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 342\n          },\n          __self: this\n        });\n      }\n    } else {\n      return React.createElement(Not_Found, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 346\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default MediaUpload;","map":{"version":3,"sources":["/var/www/html/REACT_WORK/NEW_PLANETSHARE/web_planetshare/src/Container/Dashboard/SellerDashboard/Bidding/MediaUploads.js"],"names":["React","Component","axios","$","USERID","TAG","HEADER","BIDMEDIA","BIDEXIST","Link","withRouter","History","Resumable","cogoToast","Progress","LoadingGif","Not_Found","ToastContainer","toast","cssTransition","Zoom","enter","exit","duration","SELLER_HEADER","headers","localStorage","getItem","uploadPercentage","MediaUpload","state","percentage","video_id","showTable","tableContent","nextComponent","email","not_found","tag","loading","loading_msg","btn_disable","bid_id","embed_url","embed_btn","getStatus","post","status_type","user_id","seller_id","then","res","key","data","success","setState","getUpload","catch","error","window","props","$fileUpload","hide","$fileUploadDrop","$uploadList","length","resumable","chunkSize","fileType","simultaneousUploads","testChunks","throttleProgressCallbacks","maxFiles","target","query","_token","val","media_type","maxFilesErrorCallback","files","errorCount","console","log","maxFileSizeErrorCallback","file","click","addClass","removeClass","support","show","assignDrop","assignBrowse","on","append","uniqueIdentifier","html","fileName","upload","message","result","JSON","parse","Math","floor","progress","css","width","isUploading","pause","redirectHandler","document","getElementById","value","setTimeout","position","history","push","submitEmbedUrl","e","preventDefault","video_url","trim","alert","componentWillMount","componentDidMount","match","params","componentDidUpdate","cancel","render","img_loading_msg","img_loading","uploadImage","display","replace"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport {USERID,TAG,HEADER,BIDMEDIA,BIDEXIST} from '../../../../url';\nimport {Link,withRouter} from \"react-router-dom\";\nimport { History } from \"react-router\"\nimport Resumable from 'resumablejs';\nimport cogoToast from 'cogo-toast';\nimport Progress from '../Asset/progressbar';\nimport LoadingGif from '../../../../Component/Loader/loading_gif';\nimport Not_Found from '../../../../Component/not_found/not_found';\nimport { ToastContainer, toast,cssTransition} from 'react-toastify';\nconst Zoom = cssTransition({\nenter: 'zoomIn',\nexit: 'zoomOut',\nduration: 750,\n});\nconst SELLER_HEADER = {\nheaders: {\n 'Content-Type': 'multipart/form-data',\n 'Authorization':\"Bearer \" + localStorage.getItem('planetshare_web_token'),\n}\n};\nconst uploadPercentage='0%';\nclass MediaUpload extends Component {\n  state={\n    percentage:'',\n    video_id:'',\n    showTable:false,\n    tableContent:[],\n    nextComponent:false,\n    email:'',not_found:false,\n  tag:'',loading:false,loading_msg:'Please Wait',btn_disable:true,bid_id:'',embed_url:false,embed_btn:false\n\n  }\n  componentWillMount()\n  {\n    // this.props.history.push('',{ detail: 'user'});\n    // this.props.history.push({\n    //       pathname : '/dashboard/seller/asset',\n    //       state :{\n    //       tag :'video',\n    //       }\n    //       }\n    //     );\n    var email=localStorage.getItem('username');\n    this.setState({email:email});\n  }\n  componentDidMount()\n  {\n    setTimeout(()=>this.setState({loading:true,bid_id:this.props.match.params.bid_id},function()\n  {\n      this.getStatus()\n  }),1000)\n  }\n  componentDidUpdate()\n  {\n    if(this.props.match.params.bid_id!=this.state.bid_id )\n    {\n      this.setState({bid_id:this.props.match.params.bid_id,loading:true,not_found:false},function()\n    {\n       this.getStatus();\n    });\n   }\n  }\n  getStatus=()=>{\n    axios.post(BIDEXIST,{status_type:'media',bid_id:this.state.bid_id,user_id:localStorage.getItem('user_id'),tag:TAG,seller_id:localStorage.getItem('seller_id')},{  headers:{\n      'Authorization':\"Bearer \" + localStorage.getItem('planetshare_web_token'),\n    }}).then((res,key)=>{\n      if(res.data.success==1)\n      {\n        this.setState({loading:true},function()\n      {\n            this.getUpload();\n      })\n      }\n      else {\n        this.setState({not_found:true})\n      }\n    }).catch((error)=>{\n\n    })\n  }\n  getUpload=()=>{\n      var $ = window.$; // use the global jQuery instance\n      var tag=this.props.tag;\n      this.setState({tag:tag});\n      var $fileUpload = $('#resumable-browse');\n      $('#start-upload-btn').hide();\n        $('#pause-upload-btn').hide();\n        $('#cancel-upload-btn').hide();\n      var $fileUploadDrop = $('#resumable-drop');\n      var $uploadList = $(\"#file-upload-list\");\n      if ($fileUpload.length > 0 && $fileUploadDrop.length > 0) {\n          var resumable = new Resumable({\n\n          // Use chunk size that is smaller than your maximum limit due a resumable issue\n          // https://github.com/23/resumable.js/issues/51\n          chunkSize: 5 * 1024 * 1024, // 1MB\n          // fileType: ['mp4','3gp','avi','flv'],\n          fileType: ['3gp','mp4','flv'],\n          simultaneousUploads:1,\n          testChunks: false,\n          throttleProgressCallbacks: 1,\n          maxFiles:1,\n          // Get the url from data-url tag\n          target: $fileUpload.data('url'),\n          // Append token to the request - required for web routes\n          headers:{\n          'Authorization':\"Bearer \" + localStorage.getItem('planetshare_web_token'),\n        },\n          query:{_token : $('input[name=_token]').val(),media_type:'upload',bid_id:this.state.bid_id,tag:TAG,seller_id:localStorage.getItem('seller_id'),user_id:localStorage.getItem('user_id')},\n          maxFilesErrorCallback(files, errorCount){ console.log(errorCount);},\n          maxFileSizeErrorCallback(file, errorCount){console.log(errorCount)}\n      });\n\n  // Resumable.js isn't supported, fall back on a different method\n  $('#resumable-browse').click(function()\n  {\n    $('#dubbing_cont').addClass('collapsed');\n    $('#dubbing_upload_button').removeClass('show');\n  })\n      if (!resumable.support) {\n          $('#resumable-error').show();\n      } else {\n          // Show a place for dropping/selecting files\n          $fileUploadDrop.show();\n          resumable.assignDrop($fileUpload[0]);\n          resumable.assignBrowse($fileUploadDrop[0]);\n\n          // Handle file add event\n\n          resumable.on('fileAdded', function (file) {\n              // Show progress pabr\n\n              $fileUpload.hide();\n              $uploadList.show();\n              $('#progress_bar_status').show()\n\n              $('#file_upload_button').hide()\n              // $('#start-upload-btn').show();\n                $('#pause-upload-btn').show();\n                $('#cancel-upload-btn').show();\n              // Show pause, hide resume\n              $('.resumable-progress .progress-resume-link').hide();\n              $('.resumable-progress .progress-pause-link').show();\n              // Add the file to the list\n              $uploadList.append('<li class=\"resumable-file-' + file.uniqueIdentifier + '\">Uploading <span class=\"resumable-file-name\"></span> <span class=\"resumable-file-progress\"></span>');\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-name').html(file.fileName);\n              // Actually start the upload\n                              // console.log(file);\n              resumable.upload();\n          });\n\n          resumable.on('fileSuccess', function (file, message) {\n            var result=JSON.parse(message);\n            $('#video_id').val(result.video_id);\n\n            $('#start-upload-btn').hide();\n            $('#pause-upload-btn').hide();\n            $('#cancel-upload-btn').hide();\n            $('#progress_bar_status').hide();\n            $('#file_upload_button').show();\n            $('#progress_bar_status').hide()\n            $('#save_button').show();\n              $fileUpload.show();\n\n\n              // Reflect that the file upload has completed\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(completed)');\n          });\n          resumable.on('fileError', function (file, message) {\n              // Reflect that the file upload has resulted in error\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(file could not be uploaded: ' + message + ')');\n          });\n          resumable.on('fileProgress', function (file) {\n              // Handle progress for both the file and the overall upload\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html(Math.floor(file.progress() * 100) + '%');\n              $('.progress-bar').css({width: Math.floor(resumable.progress() * 100) + '%'});\n              $('#hidden_percent').val(Math.floor(file.progress() * 100));\n              $('#show_percentage').html(Math.floor(file.progress() * 100)+'%');\n             // uploadPercentage=Math.floor(file.progress() * 100) + '%';\n              // this.setState({percentage:'10'});\n          });\n      }\n      $('#pause-upload-btn').click(function(){\n        $('#pause-upload-btn').hide();\n        $('#start-upload-btn').show();\n          if (resumable.files.length>0) {\n              if (resumable.isUploading()) {\n                return  resumable.pause();\n              }\n              return resumable.upload();\n          }\n      });\n      $('#start-upload-btn').click(function(){\n                $('#start-upload-btn').hide();\n                  $('#pause-upload-btn').show();\n          resumable.upload();\n      });\n\n  }\n}\n\npause(){\n // Show resume, hide pause\n $('.resumable-progress .progress-resume-link').show();\n $('.resumable-progress .progress-pause-link').hide();\n}\ncancel(){\n$('.resumable-file-progress').html('canceled');\n}\nredirectHandler=()=>\n{\n  var video_id=document.getElementById('video_id').value;\n  // alert(video_id);\n  if(video_id=='')\n  {\n    return false;\n  }\n  else {\n     this.setState({video_id:video_id,btn_disable:false})\n    this.setState({loading:true,loading_msg:'Saving Your Content'},function()\n  {\n    setTimeout(()=>{\n        cogoToast.success('Your content is under review',{position:'bottom-center'});\n        this.props.history.push(`/dashboard/seller/bidding/bid_rights/${this.state.bid_id}`)},1000);\n})\n  }\n}\nsubmitEmbedUrl=(e)=>{\n  e.preventDefault();\n  this.setState({embed_btn:true})\n  var video_url=e.target.embed_url.value.trim();\n  if(video_url=='')\n  {\n    alert('Please Provide Url');\n    this.setState({embed_btn:false})\n    return false;\n  }\n  axios.post(BIDMEDIA,{video_url:video_url,seller_id:localStorage.getItem('seller_id'),user_id:localStorage.getItem('user_id'),media_type:'embed',bid_id:this.state.bid_id,tag:TAG}\n,{ headers:{\n  'Authorization':\"Bearer \" + localStorage.getItem('planetshare_web_token'),\n}}).then((res)=>{\n  if(res.data.success==1)\n  {\n    this.setState({embed_btn:false})\n    this.setState({loading:true,loading_msg:'Saving Your Content'},function()\n  {\n      setTimeout(()=>{\n\n          this.props.history.push(`/dashboard/seller/bidding/bid_rights/${this.state.bid_id}`)},1000);\n  })\n  }\n  else {\n    this.setState({embed_btn:false,loading:false,loading_msg:'Please Wait'})\n  }\n}).catch((error)=>{\nthis.setState({embed_btn:false,loading:false,loading_msg:'Please Wait'})\n})\n}\n  render() {\n    const {loading_msg,loading,img_loading_msg,img_loading,not_found,embed_url}=this.state;\n    if(!not_found)\n    {\n      if(loading)\n      {\n        return (\n          <section class=\"inner_cont upload_cont\">\n                  <article class=\"gig_info\">\n                      <div class=\"container\">\n                          <div class=\"vend_cont\">\n                            <div class=\"upl_tabs\">\n                              <button class=\"btndefault active\" onClick={()=>this.setState({embed_url:false})}>Upload</button>\n                              <button class=\"btndefault\" onClick={()=>this.setState({embed_url:true})}>Embed Url</button>\n                            </div>\n                              {!embed_url && <form class=\"form_control\" onSubmit={this.uploadImage} enctype=\"multipart/formData\">\n                                  <h2>Upload Your Content</h2>\n                                  <div class=\"build_gal\">\n                                      <div class=\"upload_area\">\n                                      <button type=\"button\" class=\"btn btn-warning\" aria-label=\"Pause upload\" id=\"pause-upload-btn\" style={{display: \"none\"}}>\n                                          <span class=\"glyphicon glyphicon-pause \" aria-hidden=\"true\"></span> Pause upload\n                                      </button>\n                                      <button type=\"button\" class=\"btn btn-info\" aria-label=\"Start upload\" id=\"start-upload-btn\" style={{display: \"none\"}}>\n                                          <span class=\"glyphicon glyphicon-upload\" aria-hidden=\"true\"></span> Start upload\n                                      </button>\n                                        <button type=\"button\" class=\"btn btn-warning\" aria-label=\"Pause upload\" id=\"cancel-upload-btn\" style={{display: \"none\"}} onClick={()=>{this.props.history.push('/dashboard/seller');setTimeout(()=>this.props.history.replace('/dashboard/seller/add_asset/video'),1000);}}>\n                                            <span class=\"glyphicon glyphicon-pause \" aria-hidden=\"true\"></span> Cancel upload\n                                        </button>\n                                        <input type=\"hidden\" id=\"video_id\"/>\n                                          <ul class=\"browse_list mult\">\n                                              <li>\n                                                  <div class=\"upl_box\">\n                                                      <label for=\"gallery-photo-add\">\n\n                                                        <div id=\"resumable-drop\">\n                                                        <div id=\"file_upload_button\" class=\"mt-16\">\n                                                        <span class=\"fileinput-button\">\n                                                            <i class=\"glyphicon glyphicon-plus\"></i>\n                                                             <button type=\"button\" class=\"btndefault fileinput-button\" id=\"resumable-browse\"   data-url={`${BIDMEDIA}`}>Select Files</button>\n                                                        </span>\n                                                        </div>\n                                                        </div>\n                                                      </label>\n                                                       <span class=\"note\">(.mp4,.3gp files that are at least 10Mb)</span>\n                                                        <Progress  percent={this.state.percentage}/>\n                                                       <div class=\"col-lg-offset-2 col-lg-12\" id=\"progress_bar_status\" style={{display:'none'}}>\n                                                       <p>\n\n                                                       <div id=\"show_percentage\" ></div>\n                                                       </p>\n\n                                                       </div>\n\n                                                  </div>\n                                              </li>\n                                          </ul>\n                                      </div>\n                                  </div>\n                                  <div class=\"buttons\">\n                                      <button type=\"button\" class=\"btndefault\" id=\"upload_img_btn\"  onClick={()=>this.redirectHandler()}>Save</button>\n                                  </div>\n                              </form>}\n                              {embed_url && <form class=\"form_control\" onSubmit={this.submitEmbedUrl}>\n                                <div class=\"fields embed\">\n                                  <div class=\"inputbox\">\n                                    <input type=\"text\" name=\"embed_url\" required/>\n                                    <button class=\"btndefault\" type=\"submit\" disabled={this.state.embed_btn}>Save</button>\n                                  </div>\n                                </div>\n                              </form>}\n                              <div class=\"clearfix\"></div>\n                          </div>\n                      </div>\n                      <div class=\"clearfix\"></div>\n                  </article>\n                  <div class=\"clearfix\"></div>\n              </section>\n            )\n          }\n          else {\n            return(<LoadingGif message={loading_msg}/>)\n          }\n    }\n    else {\n      return(<Not_Found/>)\n    }\n      }\n    }\nexport default MediaUpload;\n"]},"metadata":{},"sourceType":"module"}
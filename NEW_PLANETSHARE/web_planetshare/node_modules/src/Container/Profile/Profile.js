import React from 'react';
import axios from 'axios';
import  {Redirect} from 'react-router-dom';
import {BUYERPROFILE,USERID,TAG} from '../../url'
import ActivityLoader from 'react-loader-spinner';
import Authentication from '../Authentication/Authentication';
import $ from 'jquery';
import { ToastContainer, toast,cssTransition} from 'react-toastify';
const Zoom = cssTransition({
enter: 'zoomIn',
exit: 'zoomOut',
duration: 750,
});
const HEADER = {
headers: {
  'Content-Type': 'application/json;charset=UTF-8',
  'Authorization':"Bearer " + localStorage.getItem('planetshare_web_token'),
}
};
class Profile extends React.Component
{
  state={not_found:false,loading:false,loading_msg:'Please Wait',user_info:{},update_form:false,email:'',name:''}
  componentDidMount()
  {
    this.getData();
  }
  getData=()=>{
    axios.post(BUYERPROFILE,{user_id:localStorage.getItem('user_id'),tag:TAG},HEADER).then((res)=>{
      if(res.data.success==1)
      {
        var response=res.data;
        this.setState({user_info:response.data,name:response.data.name,email:response.data.email})
        setTimeout(()=>this.setState({loading:true}),1000)
      }
      else
      {

      }
    }).catch((error)=>{
      this.props.history.push('/web')
    })
  }
  render()
  {
    const {loading,loading_msg,user_info,update_form}=this.state;
    if(loading)
    {
    return( <section class="edit_user_prof">
        <div class="container">
            <div class="edit_prof">
                <div class="side_links">
                    <h3>My Account</h3>
                    <ul class="p_links">
                        <li>
                            <a href="javascript:;"><i class="fa fa-user"></i> Profile</a>
                        </li>
                        <li>
                            <a href="javascript:;"><i class="fa fa-list-alt" aria-hidden="true"></i> Plans</a>
                        </li>
                        <li>
                            <a href="javascript:;"><i class="fa fa-credit-card-alt" aria-hidden="true"></i> Billing</a>
                        </li>
                        <li>
                            <a href="javascript:;"><i class="fa fa-history" aria-hidden="true"></i> Purhchase history</a>
                        </li>
                    </ul>
                </div>
                <div class="prof_cont">
                    <h2>Profile</h2>
                    <h3>User Details {!update_form && <a href="javascript:" class="btn" onClick={()=>{this.setState({update_form:true})}}>Edit</a>}</h3>
                    <div class="u_box">
                        {!update_form && <ul class="pers_info_list">
                            <li>
                                <div class="ttl">Name</div>
                                <div class="val">{user_info.name}</div>
                                <div class="buttons">
                                </div>
                            </li>
                            <li>
                                <div class="ttl">User ID</div>
                                <div class="val">{user_info.Accountid}</div>
                                <div class="buttons"></div>
                            </li>
                            <li>
                                <div class="ttl">Password</div>
                                <div class="val">*********</div>
                                <div class="buttons">
                                </div>
                            </li>
                            <li>
                                <div class="ttl">Email</div>
                                <div class="val">{user_info.email}</div>
                                <div class="buttons">
                                </div>
                            </li>
                        </ul>}
                        {update_form && <div class="edit_aria">
                            <ul class="pers_info_list inp_ed">
                                <li>
                                    <div class="ttl">Name</div>
                                    <div class="val"><input type="text" alt=""  Value={user_info.name} onChange={(e)=>this.setState({name:e.target.value})}/></div>
                                </li>

                                <li>
                                    <div class="ttl">Password</div>
                                    <div class="val"><input type="password" alt="" /></div>
                                </li>
                                <li>
                                    <div class="ttl">Email</div>
                                    <div class="val"><input type="email" alt="" Value={user_info.email} onChange={(e)=>this.setState({email:e.target.value})}/></div>
                                </li>
                            </ul>
                            <div class="buttons">
                                <button type="button" class="btndefault" onClick={()=>{this.setState({update_form:false})}}>Cancel</button>
                                <button type="submit" class="btndefault">Update</button>
                            </div>
                        </div>}
                    </div>
                    <h3>Preferences</h3>
                    <div class="u_box">
                        <h4>Email Preferences</h4>
                        <p>What types of communication would you like to receive from Planetshare?</p>
                        <ul class="epref_list">
                            <li>
                                <div class="ttl">Design inspiration, tutorials, and professionally curated content.</div>
                                <div class="togle">
                                    <label class="switch">
                                        <input type="checkbox" checked />
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <div class="ttl">Special offers and amazing deals.</div>
                                <div class="togle">
                                    <label class="switch">
                                        <input type="checkbox" checked />
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </li>
                            <li>
                                <div class="ttl">Product education and updates.</div>
                                <div class="togle">
                                    <label class="switch">
                                        <input type="checkbox" checked />
                                        <span class="slider round"></span>
                                    </label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="u_box">
                        <h4>Language Preference</h4>
                        <p>Select your language. This language will be used for e-mails you receive from us and browsing our site</p>
                        <div class="selectbox">
                            <i class="fa fa-globe" aria-hidden="true"></i>
                            <select>
<option>English</option>
                                <option>Hindi</option>
<option>French</option>
                                <option>Tamil</option>
                            </select>
                            <i class="fa fa-angle-down" aria-hidden="true"></i>
                        </div>
                    </div>
                    <div class="u_box">
                        <h4>Display Preferences</h4>
                        <p>Select the units for image size measurements</p>
                        <ul class="epref_list">
                            <li>
                                <div class="custom-control custom-radio">
                                  <input type="radio" id="centimeters" name="preferences" class="custom-control-input" checked="checked" />
                                  <label class="custom-control-label" for="centimeters">Centimeters</label>
                                </div>
                            </li>
                            <li>
                                <div class="custom-control custom-radio">
                                  <input type="radio" id="inches" name="preferences" class="custom-control-input" />
                                  <label class="custom-control-label" for="inches">Inches</label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <h3>Delete Account</h3>
                    <div class="u_box delacc">
                        <p>This will remove all of your personal data forever.</p>
                        <a href="javascript:;" class="del_acc">Delete my account</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="clearfix"></div>
    </section> )
  }
  else {
    return(<div class="container loader_cont"><ActivityLoader
      type="Triangle"
       color="black"
       height={100}
       width={100}/>
       <h3>{loading_msg}</h3>
       </div>)
  }
  }
}
export default Authentication(Profile);

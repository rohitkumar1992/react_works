{"ast":null,"code":"/*\n* fingerprintJS 0.5.3 - Fast browser fingerprint library\n* https://github.com/Valve/fingerprintjs\n* Copyright (c) 2013 Valentin Vasilyev (valentin.vasilyev@outlook.com)\n* Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.\n*/\n;\n\n(function (name, context, definition) {\n  if (typeof module !== 'undefined' && module.exports) {\n    module.exports = definition();\n  } else if (typeof define === 'function' && define.amd) {\n    define(definition);\n  } else {\n    context[name] = definition();\n  }\n})('Fingerprint', this, function () {\n  'use strict';\n\n  var Fingerprint = function (options) {\n    var nativeForEach, nativeMap;\n    nativeForEach = Array.prototype.forEach;\n    nativeMap = Array.prototype.map;\n\n    this.each = function (obj, iterator, context) {\n      if (obj === null) {\n        return;\n      }\n\n      if (nativeForEach && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, context);\n      } else if (obj.length === +obj.length) {\n        for (var i = 0, l = obj.length; i < l; i++) {\n          if (iterator.call(context, obj[i], i, obj) === {}) return;\n        }\n      } else {\n        for (var key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            if (iterator.call(context, obj[key], key, obj) === {}) return;\n          }\n        }\n      }\n    };\n\n    this.map = function (obj, iterator, context) {\n      var results = []; // Not using strict equality so that this acts as a\n      // shortcut to checking for `null` and `undefined`.\n\n      if (obj == null) return results;\n      if (nativeMap && obj.map === nativeMap) return obj.map(iterator, context);\n      this.each(obj, function (value, index, list) {\n        results[results.length] = iterator.call(context, value, index, list);\n      });\n      return results;\n    };\n\n    if (typeof options == 'object') {\n      this.hasher = options.hasher;\n      this.screen_resolution = options.screen_resolution;\n      this.canvas = options.canvas;\n      this.ie_activex = options.ie_activex;\n    } else if (typeof options == 'function') {\n      this.hasher = options;\n    }\n  };\n\n  Fingerprint.prototype = {\n    get: function () {\n      var keys = [];\n      keys.push(navigator.userAgent);\n      keys.push(navigator.language);\n      keys.push(screen.colorDepth);\n\n      if (this.screen_resolution) {\n        var resolution = this.getScreenResolution();\n\n        if (typeof resolution !== 'undefined') {\n          // headless browsers, such as phantomjs\n          keys.push(this.getScreenResolution().join('x'));\n        }\n      }\n\n      keys.push(new Date().getTimezoneOffset());\n      keys.push(this.hasSessionStorage());\n      keys.push(this.hasLocalStorage());\n      keys.push(!!window.indexedDB); //body might not be defined at this point or removed programmatically\n\n      if (document.body) {\n        keys.push(typeof document.body.addBehavior);\n      } else {\n        keys.push(typeof undefined);\n      }\n\n      keys.push(typeof window.openDatabase);\n      keys.push(navigator.cpuClass);\n      keys.push(navigator.platform);\n      keys.push(navigator.doNotTrack);\n      keys.push(this.getPluginsString());\n\n      if (this.canvas && this.isCanvasSupported()) {\n        keys.push(this.getCanvasFingerprint());\n      }\n\n      if (this.hasher) {\n        return this.hasher(keys.join('###'), 31);\n      } else {\n        return this.murmurhash3_32_gc(keys.join('###'), 31);\n      }\n    },\n\n    /**\n     * JS Implementation of MurmurHash3 (r136) (as of May 20, 2011)\n     * \n     * @author <a href=\"mailto:gary.court@gmail.com\">Gary Court</a>\n     * @see http://github.com/garycourt/murmurhash-js\n     * @author <a href=\"mailto:aappleby@gmail.com\">Austin Appleby</a>\n     * @see http://sites.google.com/site/murmurhash/\n     * \n     * @param {string} key ASCII only\n     * @param {number} seed Positive integer only\n     * @return {number} 32-bit positive integer hash \n     */\n    murmurhash3_32_gc: function (key, seed) {\n      var remainder, bytes, h1, h1b, c1, c2, k1, i;\n      remainder = key.length & 3; // key.length % 4\n\n      bytes = key.length - remainder;\n      h1 = seed;\n      c1 = 0xcc9e2d51;\n      c2 = 0x1b873593;\n      i = 0;\n\n      while (i < bytes) {\n        k1 = key.charCodeAt(i) & 0xff | (key.charCodeAt(++i) & 0xff) << 8 | (key.charCodeAt(++i) & 0xff) << 16 | (key.charCodeAt(++i) & 0xff) << 24;\n        ++i;\n        k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1b = (h1 & 0xffff) * 5 + (((h1 >>> 16) * 5 & 0xffff) << 16) & 0xffffffff;\n        h1 = (h1b & 0xffff) + 0x6b64 + (((h1b >>> 16) + 0xe654 & 0xffff) << 16);\n      }\n\n      k1 = 0;\n\n      switch (remainder) {\n        case 3:\n          k1 ^= (key.charCodeAt(i + 2) & 0xff) << 16;\n\n        case 2:\n          k1 ^= (key.charCodeAt(i + 1) & 0xff) << 8;\n\n        case 1:\n          k1 ^= key.charCodeAt(i) & 0xff;\n          k1 = (k1 & 0xffff) * c1 + (((k1 >>> 16) * c1 & 0xffff) << 16) & 0xffffffff;\n          k1 = k1 << 15 | k1 >>> 17;\n          k1 = (k1 & 0xffff) * c2 + (((k1 >>> 16) * c2 & 0xffff) << 16) & 0xffffffff;\n          h1 ^= k1;\n      }\n\n      h1 ^= key.length;\n      h1 ^= h1 >>> 16;\n      h1 = (h1 & 0xffff) * 0x85ebca6b + (((h1 >>> 16) * 0x85ebca6b & 0xffff) << 16) & 0xffffffff;\n      h1 ^= h1 >>> 13;\n      h1 = (h1 & 0xffff) * 0xc2b2ae35 + (((h1 >>> 16) * 0xc2b2ae35 & 0xffff) << 16) & 0xffffffff;\n      h1 ^= h1 >>> 16;\n      return h1 >>> 0;\n    },\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=781447\n    hasLocalStorage: function () {\n      try {\n        return !!window.localStorage;\n      } catch (e) {\n        return true; // SecurityError when referencing it means it exists\n      }\n    },\n    hasSessionStorage: function () {\n      try {\n        return !!window.sessionStorage;\n      } catch (e) {\n        return true; // SecurityError when referencing it means it exists\n      }\n    },\n    isCanvasSupported: function () {\n      var elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('2d'));\n    },\n    isIE: function () {\n      if (navigator.appName === 'Microsoft Internet Explorer') {\n        return true;\n      } else if (navigator.appName === 'Netscape' && /Trident/.test(navigator.userAgent)) {\n        // IE 11\n        return true;\n      }\n\n      return false;\n    },\n    getPluginsString: function () {\n      if (this.isIE() && this.ie_activex) {\n        return this.getIEPluginsString();\n      } else {\n        return this.getRegularPluginsString();\n      }\n    },\n    getRegularPluginsString: function () {\n      return this.map(navigator.plugins, function (p) {\n        var mimeTypes = this.map(p, function (mt) {\n          return [mt.type, mt.suffixes].join('~');\n        }).join(',');\n        return [p.name, p.description, mimeTypes].join('::');\n      }, this).join(';');\n    },\n    getIEPluginsString: function () {\n      if (window.ActiveXObject) {\n        var names = ['ShockwaveFlash.ShockwaveFlash', //flash plugin\n        'AcroPDF.PDF', // Adobe PDF reader 7+\n        'PDF.PdfCtrl', // Adobe PDF reader 6 and earlier, brrr\n        'QuickTime.QuickTime', // QuickTime\n        // 5 versions of real players\n        'rmocx.RealPlayer G2 Control', 'rmocx.RealPlayer G2 Control.1', 'RealPlayer.RealPlayer(tm) ActiveX Control (32-bit)', 'RealVideo.RealVideo(tm) ActiveX Control (32-bit)', 'RealPlayer', 'SWCtl.SWCtl', // ShockWave player\n        'WMPlayer.OCX', // Windows media player\n        'AgControl.AgControl', // Silverlight\n        'Skype.Detection']; // starting to detect plugins in IE\n\n        return this.map(names, function (name) {\n          try {\n            new ActiveXObject(name);\n            return name;\n          } catch (e) {\n            return null;\n          }\n        }).join(';');\n      } else {\n        return \"\"; // behavior prior version 0.5.0, not breaking backwards compat.\n      }\n    },\n    getScreenResolution: function () {\n      return [screen.height, screen.width];\n    },\n    getCanvasFingerprint: function () {\n      var canvas = document.createElement('canvas');\n      var ctx = canvas.getContext('2d'); // https://www.browserleaks.com/canvas#how-does-it-work\n\n      var txt = 'http://valve.github.io';\n      ctx.textBaseline = \"top\";\n      ctx.font = \"14px 'Arial'\";\n      ctx.textBaseline = \"alphabetic\";\n      ctx.fillStyle = \"#f60\";\n      ctx.fillRect(125, 1, 62, 20);\n      ctx.fillStyle = \"#069\";\n      ctx.fillText(txt, 2, 15);\n      ctx.fillStyle = \"rgba(102, 204, 0, 0.7)\";\n      ctx.fillText(txt, 4, 17);\n      return canvas.toDataURL();\n    }\n  };\n  return Fingerprint;\n});","map":null,"metadata":{},"sourceType":"script"}
{"version":3,"file":"index.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// @ts-ignore\r\nimport styles from './styles.css';\r\n\r\ntype IState = {\r\n  show: boolean;\r\n  full: boolean;\r\n  progress: number;\r\n  wait: boolean;\r\n};\r\n\r\ntype IProps = {\r\n  progress?: number;\r\n  color?: string;\r\n  background?: string;\r\n  height?: number;\r\n  onLoaderFinished?: Function;\r\n  onProgressChange?: Function;\r\n  className?: string;\r\n  onRef?: Function;\r\n};\r\n\r\nclass LoadingBar extends Component<IProps, IState> {\r\n  state = {\r\n    show: true,\r\n    full: false,\r\n    progress: 0,\r\n    wait: false\r\n  };\r\n  static propTypes = {\r\n    progress: PropTypes.number,\r\n    color: PropTypes.string,\r\n    background: PropTypes.string,\r\n    height: PropTypes.number,\r\n    onLoaderFinished: PropTypes.func,\r\n    onProgressChange: PropTypes.func,\r\n    className: PropTypes.string,\r\n    onRef: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    progress: 0,\r\n    color: '#f11946',\r\n    height: 3,\r\n    className: '',\r\n    background: ''\r\n  };\r\n\r\n  private mounted: boolean;\r\n\r\n  public add = (value: number) => {\r\n    this.setState({ progress: this.state.progress + value }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  private onProgressChange = () => {\r\n    if (this.props.onProgressChange)\r\n      this.props.onProgressChange(this.state.progress);\r\n\r\n    this.checkIfFull();\r\n  };\r\n\r\n  public decrease = (value: number) => {\r\n    this.setState({ progress: this.state.progress - value }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  private randomInt(low: number, high: number) {\r\n    return Math.floor(Math.random() * (high - low) + low);\r\n  }\r\n\r\n   /** @deprecated this method contains a typo, use continuousStart */\r\n  public continousStart = (startingValue: number) => {\r\n    const random = startingValue || this.randomInt(20, 30);\r\n    this.setState({ progress: random });\r\n\r\n    const interval = setInterval(() => {\r\n      if (this.state.progress < 90) {\r\n        const random = this.randomInt(2, 10);\r\n        if (!this.mounted) return false;\r\n        this.setState({ progress: this.state.progress + random }, () => {\r\n          this.onProgressChange();\r\n        });\r\n      } else {\r\n        clearInterval(interval);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  public continuousStart = (startingValue: number) => {\r\n    const random = startingValue || this.randomInt(20, 30)\r\n    this.setState({ progress: random })\r\n\r\n    const interval = setInterval(() => {\r\n      if (this.state.progress < 90) {\r\n        const random = this.randomInt(2, 10)\r\n        if (!this.mounted) return false\r\n        this.setState({ progress: this.state.progress + random }, () => {\r\n          this.onProgressChange()\r\n        })\r\n      } else {\r\n        clearInterval(interval)\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  public staticStart = (startingValue: number) => {\r\n    const random = startingValue || this.randomInt(30, 50);\r\n\r\n    this.setState({ progress: random }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  public complete = () => {\r\n    this.setState({ progress: 100 }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  private onLoaderFinished = () => {\r\n    if (this.props.onLoaderFinished) this.props.onLoaderFinished();\r\n\r\n    this.setState({ progress: 0 }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { className, height } = this.props;\r\n    const { show, full } = this.state;\r\n    return (\r\n      <div style={{ height }}>\r\n        {show ? (\r\n          <div\r\n            className={\r\n              styles['loading-bar'] +\r\n              ' ' +\r\n              (className || '') +\r\n              ' ' +\r\n              (full ? styles['loading-bar-full'] : '')\r\n            }\r\n            style={this.barStyle()}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps: IProps) {\r\n    // Watching Progress Changes\r\n    if (nextProps.progress !== this.props.progress) {\r\n      this.setState({ progress: nextProps.progress }, () => {\r\n        if (this.props.onProgressChange != null) {\r\n          this.props.onProgressChange();\r\n        }\r\n        this.checkIfFull();\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    if (this.props.onRef) this.props.onRef(this);\r\n\r\n    if (this.state.progress !== this.props.progress) {\r\n      this.setState({ progress: this.props.progress });\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n    if (this.props.onRef) this.props.onRef(undefined);\r\n  }\r\n  // Check whether the progress is full\r\n  private checkIfFull = () => {\r\n    if (!this.mounted) return false;\r\n\r\n    if (this.state.progress >= 100) {\r\n      // Prevent new progress change\r\n      this.setState({ wait: true });\r\n\r\n      // Start animate it\r\n      setTimeout(() => {\r\n        if (!this.mounted) return false;\r\n        // animate when element removed\r\n        this.setState({\r\n          full: true\r\n        });\r\n\r\n        setTimeout(() => {\r\n          if (!this.mounted) return false;\r\n          this.setState({\r\n            // remove bar element\r\n            show: false,\r\n            progress: 0,\r\n            wait: false\r\n          });\r\n\r\n          setTimeout(() => {\r\n            if (!this.mounted) return false;\r\n            this.setState({\r\n              // Show Bar\r\n              full: false,\r\n              show: true\r\n            });\r\n            this.onLoaderFinished();\r\n          });\r\n\r\n          // Duration to Waiting for hiding animation\r\n        }, 250);\r\n\r\n        // Duration is depend on css animation-duration of loading-bar\r\n      }, 700);\r\n    }\r\n  };\r\n\r\n  // apply width style to our element as inline style\r\n  private barStyle() {\r\n    // When loading bar still in progress\r\n    const { color, background } = this.props;\r\n    if (background || background !== '') {\r\n      console.warn(\r\n        \"react-top-loading-bar: Please don't use background property as a property since it's deprecated. Please use 'color' since it now haves the same function as background.\"\r\n      );\r\n    }\r\n\r\n    if (!this.state.wait) {\r\n      return {\r\n        width: `${this.state.progress}%`,\r\n        background: background || color\r\n      };\r\n    } else {\r\n      return { width: '100%', background: background || color };\r\n    }\r\n  }\r\n}\r\n\r\nexport default LoadingBar;\r\n"],"names":["tslib_1","_this","show","full","progress","wait","value","setState","state","onProgressChange","props","checkIfFull","startingValue","random","randomInt","interval","setInterval","random_1","mounted","clearInterval","random_2","onLoaderFinished","setTimeout","LoadingBar","low","high","Math","floor","_a","className","height","_b","React","styles","barStyle","nextProps","onRef","undefined","color","background","console","warn","width","PropTypes","number","string","func","Component"],"mappings":"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"}
{"version":3,"file":"index.es.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.tsx"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\n// @ts-ignore\r\nimport styles from './styles.css';\r\n\r\ntype IState = {\r\n  show: boolean;\r\n  full: boolean;\r\n  progress: number;\r\n  wait: boolean;\r\n};\r\n\r\ntype IProps = {\r\n  progress?: number;\r\n  color?: string;\r\n  background?: string;\r\n  height?: number;\r\n  onLoaderFinished?: Function;\r\n  onProgressChange?: Function;\r\n  className?: string;\r\n  onRef?: Function;\r\n};\r\n\r\nclass LoadingBar extends Component<IProps, IState> {\r\n  state = {\r\n    show: true,\r\n    full: false,\r\n    progress: 0,\r\n    wait: false\r\n  };\r\n  static propTypes = {\r\n    progress: PropTypes.number,\r\n    color: PropTypes.string,\r\n    background: PropTypes.string,\r\n    height: PropTypes.number,\r\n    onLoaderFinished: PropTypes.func,\r\n    onProgressChange: PropTypes.func,\r\n    className: PropTypes.string,\r\n    onRef: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    progress: 0,\r\n    color: '#f11946',\r\n    height: 3,\r\n    className: '',\r\n    background: ''\r\n  };\r\n\r\n  private mounted: boolean;\r\n\r\n  public add = (value: number) => {\r\n    this.setState({ progress: this.state.progress + value }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  private onProgressChange = () => {\r\n    if (this.props.onProgressChange)\r\n      this.props.onProgressChange(this.state.progress);\r\n\r\n    this.checkIfFull();\r\n  };\r\n\r\n  public decrease = (value: number) => {\r\n    this.setState({ progress: this.state.progress - value }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  private randomInt(low: number, high: number) {\r\n    return Math.floor(Math.random() * (high - low) + low);\r\n  }\r\n\r\n   /** @deprecated this method contains a typo, use continuousStart */\r\n  public continousStart = (startingValue: number) => {\r\n    const random = startingValue || this.randomInt(20, 30);\r\n    this.setState({ progress: random });\r\n\r\n    const interval = setInterval(() => {\r\n      if (this.state.progress < 90) {\r\n        const random = this.randomInt(2, 10);\r\n        if (!this.mounted) return false;\r\n        this.setState({ progress: this.state.progress + random }, () => {\r\n          this.onProgressChange();\r\n        });\r\n      } else {\r\n        clearInterval(interval);\r\n      }\r\n    }, 1000);\r\n  };\r\n\r\n  public continuousStart = (startingValue: number) => {\r\n    const random = startingValue || this.randomInt(20, 30)\r\n    this.setState({ progress: random })\r\n\r\n    const interval = setInterval(() => {\r\n      if (this.state.progress < 90) {\r\n        const random = this.randomInt(2, 10)\r\n        if (!this.mounted) return false\r\n        this.setState({ progress: this.state.progress + random }, () => {\r\n          this.onProgressChange()\r\n        })\r\n      } else {\r\n        clearInterval(interval)\r\n      }\r\n    }, 1000)\r\n  }\r\n\r\n  public staticStart = (startingValue: number) => {\r\n    const random = startingValue || this.randomInt(30, 50);\r\n\r\n    this.setState({ progress: random }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  public complete = () => {\r\n    this.setState({ progress: 100 }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  private onLoaderFinished = () => {\r\n    if (this.props.onLoaderFinished) this.props.onLoaderFinished();\r\n\r\n    this.setState({ progress: 0 }, () => {\r\n      this.onProgressChange();\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { className, height } = this.props;\r\n    const { show, full } = this.state;\r\n    return (\r\n      <div style={{ height }}>\r\n        {show ? (\r\n          <div\r\n            className={\r\n              styles['loading-bar'] +\r\n              ' ' +\r\n              (className || '') +\r\n              ' ' +\r\n              (full ? styles['loading-bar-full'] : '')\r\n            }\r\n            style={this.barStyle()}\r\n          />\r\n        ) : null}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps: IProps) {\r\n    // Watching Progress Changes\r\n    if (nextProps.progress !== this.props.progress) {\r\n      this.setState({ progress: nextProps.progress }, () => {\r\n        if (this.props.onProgressChange != null) {\r\n          this.props.onProgressChange();\r\n        }\r\n        this.checkIfFull();\r\n      });\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.mounted = true;\r\n    if (this.props.onRef) this.props.onRef(this);\r\n\r\n    if (this.state.progress !== this.props.progress) {\r\n      this.setState({ progress: this.props.progress });\r\n    }\r\n  }\r\n  componentWillUnmount() {\r\n    this.mounted = false;\r\n    if (this.props.onRef) this.props.onRef(undefined);\r\n  }\r\n  // Check whether the progress is full\r\n  private checkIfFull = () => {\r\n    if (!this.mounted) return false;\r\n\r\n    if (this.state.progress >= 100) {\r\n      // Prevent new progress change\r\n      this.setState({ wait: true });\r\n\r\n      // Start animate it\r\n      setTimeout(() => {\r\n        if (!this.mounted) return false;\r\n        // animate when element removed\r\n        this.setState({\r\n          full: true\r\n        });\r\n\r\n        setTimeout(() => {\r\n          if (!this.mounted) return false;\r\n          this.setState({\r\n            // remove bar element\r\n            show: false,\r\n            progress: 0,\r\n            wait: false\r\n          });\r\n\r\n          setTimeout(() => {\r\n            if (!this.mounted) return false;\r\n            this.setState({\r\n              // Show Bar\r\n              full: false,\r\n              show: true\r\n            });\r\n            this.onLoaderFinished();\r\n          });\r\n\r\n          // Duration to Waiting for hiding animation\r\n        }, 250);\r\n\r\n        // Duration is depend on css animation-duration of loading-bar\r\n      }, 700);\r\n    }\r\n  };\r\n\r\n  // apply width style to our element as inline style\r\n  private barStyle() {\r\n    // When loading bar still in progress\r\n    const { color, background } = this.props;\r\n    if (background || background !== '') {\r\n      console.warn(\r\n        \"react-top-loading-bar: Please don't use background property as a property since it's deprecated. Please use 'color' since it now haves the same function as background.\"\r\n      );\r\n    }\r\n\r\n    if (!this.state.wait) {\r\n      return {\r\n        width: `${this.state.progress}%`,\r\n        background: background || color\r\n      };\r\n    } else {\r\n      return { width: '100%', background: background || color };\r\n    }\r\n  }\r\n}\r\n\r\nexport default LoadingBar;\r\n"],"names":["value","setState","progress","_this","state","onProgressChange","props","checkIfFull","startingValue","random","randomInt","interval","setInterval","random_1","mounted","random_2","onLoaderFinished","wait","low","high","Math","floor","_a","className","height","_b","show","full","styles","barStyle","nextProps","onRef","undefined","color","background","warn","width","PropTypes","number","string","func","Component"],"mappings":"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"}
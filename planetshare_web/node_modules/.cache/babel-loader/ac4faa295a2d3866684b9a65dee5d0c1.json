{"ast":null,"code":"\"use strict\";\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nvar _require = require('../utils/razorpay-utils'),\n    normalizeDate = _require.normalizeDate,\n    normalizeBoolean = _require.normalizeBoolean,\n    normalizeNotes = _require.normalizeNotes;\n\nmodule.exports = function (api) {\n  return {\n    all: function all() {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var callback = arguments[1];\n      var from = params.from,\n          to = params.to,\n          count = params.count,\n          skip = params.skip,\n          payment_id = params.payment_id,\n          recipient_settlement_id = params.recipient_settlement_id;\n      var url = '/transfers';\n\n      if (payment_id) {\n        url = '/payments/' + payment_id + '/transfers';\n      }\n\n      if (from) {\n        from = normalizeDate(from);\n      }\n\n      if (to) {\n        to = normalizeDate(to);\n      }\n\n      count = Number(count) || 10;\n      skip = Number(skip) || 0;\n      return api.get({\n        url: url,\n        data: {\n          from: from,\n          to: to,\n          count: count,\n          skip: skip,\n          recipient_settlement_id: recipient_settlement_id\n        }\n      }, callback);\n    },\n    fetch: function fetch(transferId) {\n      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var callback = arguments[2];\n      var payment_id = params.payment_id;\n\n      if (!transferId) {\n        throw new Error('`transfer_id` is mandatory');\n      }\n\n      var url = '/transfers/' + transferId;\n      return api.get({\n        url: url\n      }, callback);\n    },\n    create: function create(params, callback) {\n      var notes = params.notes,\n          rest = _objectWithoutProperties(params, ['notes']);\n\n      var data = Object.assign(rest, normalizeNotes(notes));\n\n      if (data.on_hold) {\n        data.on_hold = normalizeBoolean(data.on_hold);\n      }\n\n      return api.post({\n        url: '/transfers',\n        data: data\n      }, callback);\n    },\n    edit: function edit(transferId, params, callback) {\n      var notes = params.notes,\n          rest = _objectWithoutProperties(params, ['notes']);\n\n      var data = Object.assign(rest, normalizeNotes(notes));\n\n      if (typeof data.on_hold !== \"undefined\") {\n        data.on_hold = normalizeBoolean(data.on_hold);\n      }\n\n      return api.patch({\n        url: '/transfers/' + transferId,\n        data: data\n      }, callback);\n    },\n    reverse: function reverse(transferId, params, callback) {\n      if (!transferId) {\n        throw new Error('`transfer_id` is mandatory');\n      }\n\n      var notes = params.notes,\n          rest = _objectWithoutProperties(params, ['notes']);\n\n      var data = Object.assign(rest, normalizeNotes(notes));\n      var url = '/transfers/' + transferId + '/reversals';\n      return api.post({\n        url: url,\n        data: data\n      }, callback);\n    }\n  };\n};","map":null,"metadata":{},"sourceType":"script"}
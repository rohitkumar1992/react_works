{"ast":null,"code":"import _classCallCheck from \"/var/www/html/REACT_WORK/planetshare_web/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/var/www/html/REACT_WORK/planetshare_web/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/var/www/html/REACT_WORK/planetshare_web/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/var/www/html/REACT_WORK/planetshare_web/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/var/www/html/REACT_WORK/planetshare_web/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/var/www/html/REACT_WORK/planetshare_web/src/container/Dashboard_Container/chunkupload/resumable.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport { Link, withRouter } from \"react-router-dom\";\nimport Resumable from 'resumablejs';\nimport Progress from './progressbar';\nimport VIDEODESCRIPTION from './videodescription';\nimport { CHUNK_UPLOAD_SERVICE } from '../../../url.js';\nvar uploadPercentage = '0%';\n\nvar VOD =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(VOD, _Component);\n\n  function VOD() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, VOD);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(VOD)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      percentage: '',\n      video_id: '',\n      showTable: false,\n      tableContent: [],\n      nextComponent: false,\n      email: '',\n      tag: ''\n    };\n\n    _this.getUpload = function () {\n      var $ = window.$; // use the global jQuery instance\n\n      var tag = _this.props.tag;\n\n      _this.setState({\n        tag: tag\n      });\n\n      var $fileUpload = $('#resumable-browse');\n      $('#start-upload-btn').hide();\n      $('#pause-upload-btn').hide();\n      $('#cancel-upload-btn').hide();\n      var $fileUploadDrop = $('#resumable-drop');\n      var $uploadList = $(\"#file-upload-list\");\n\n      if ($fileUpload.length > 0 && $fileUploadDrop.length > 0) {\n        var resumable = new Resumable({\n          // Use chunk size that is smaller than your maximum limit due a resumable issue\n          // https://github.com/23/resumable.js/issues/51\n          chunkSize: 10 * 1024 * 1024,\n          // 1MB\n          fileType: ['mp4', '3gp', 'avi', 'flv'],\n          simultaneousUploads: 1,\n          testChunks: false,\n          throttleProgressCallbacks: 1,\n          maxFiles: 1,\n          // Get the url from data-url tag\n          target: $fileUpload.data('url'),\n          // Append token to the request - required for web routes\n          query: {\n            _token: $('input[name=_token]').val(),\n            tag: tag\n          },\n          maxFilesErrorCallback: function maxFilesErrorCallback(files, errorCount) {\n            console.log(errorCount);\n          },\n          maxFileSizeErrorCallback: function maxFileSizeErrorCallback(file, errorCount) {\n            console.log(errorCount);\n          }\n        }); // Resumable.js isn't supported, fall back on a different method\n\n        $('#resumable-browse').click(function () {\n          $('#dubbing_cont').addClass('collapsed');\n          $('#dubbing_upload_button').removeClass('show');\n        });\n\n        if (!resumable.support) {\n          $('#resumable-error').show();\n        } else {\n          // Show a place for dropping/selecting files\n          $fileUploadDrop.show();\n          resumable.assignDrop($fileUpload[0]);\n          resumable.assignBrowse($fileUploadDrop[0]); // Handle file add event\n\n          resumable.on('fileAdded', function (file) {\n            // Show progress pabr\n            $fileUpload.hide();\n            $uploadList.show();\n            $('#progress_bar_status').show();\n            $('#file_upload_button').hide(); // $('#start-upload-btn').show();\n\n            $('#pause-upload-btn').show();\n            $('#cancel-upload-btn').show(); // Show pause, hide resume\n\n            $('.resumable-progress .progress-resume-link').hide();\n            $('.resumable-progress .progress-pause-link').show(); // Add the file to the list\n\n            $uploadList.append('<li class=\"resumable-file-' + file.uniqueIdentifier + '\">Uploading <span class=\"resumable-file-name\"></span> <span class=\"resumable-file-progress\"></span>');\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-name').html(file.fileName); // Actually start the upload\n            // console.log(file);\n\n            resumable.upload();\n          });\n          resumable.on('fileSuccess', function (file, message) {\n            var result = JSON.parse(message);\n            $('#video_id').val(result.video_id);\n            $('#start-upload-btn').hide();\n            $('#pause-upload-btn').hide();\n            $('#cancel-upload-btn').hide();\n            $('#progress_bar_status').hide();\n            $('#file_upload_button').show();\n            $('#progress_bar_status').hide();\n            $('#save_button').show();\n            $fileUpload.show(); // Reflect that the file upload has completed\n\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(completed)');\n          });\n          resumable.on('fileError', function (file, message) {\n            // Reflect that the file upload has resulted in error\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(file could not be uploaded: ' + message + ')');\n          });\n          resumable.on('fileProgress', function (file) {\n            // Handle progress for both the file and the overall upload\n            $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html(Math.floor(file.progress() * 100) + '%');\n            $('.progress-bar').css({\n              width: Math.floor(resumable.progress() * 100) + '%'\n            });\n            $('#hidden_percent').val(Math.floor(file.progress() * 100));\n            $('#show_percentage').html(Math.floor(file.progress() * 100) + '%'); // uploadPercentage=Math.floor(file.progress() * 100) + '%';\n            // this.setState({percentage:'10'});\n          });\n        }\n\n        $('#pause-upload-btn').click(function () {\n          $('#pause-upload-btn').hide();\n          $('#start-upload-btn').show();\n\n          if (resumable.files.length > 0) {\n            if (resumable.isUploading()) {\n              return resumable.pause();\n            }\n\n            return resumable.upload();\n          }\n        });\n        $('#start-upload-btn').click(function () {\n          $('#start-upload-btn').hide();\n          $('#pause-upload-btn').show();\n          resumable.upload();\n        });\n      }\n    };\n\n    _this.formContent = function () {\n      var video_id = document.getElementById('video_id').value;\n\n      _this.setState({\n        video_id: video_id,\n        nextComponent: true\n      });\n\n      if (_this.state.tag == \"dubbing\") {\n        _this.props.history.push(\"/dashboard/buyer/service/dubbing/uploadform/userlist/\".concat(video_id));\n      }\n\n      if (_this.state.tag == \"transcoding\") {\n        _this.props.history.push(\"/dashboard/buyer/service/transcoding/uploadform/userlist/\".concat(video_id));\n      }\n\n      if (_this.state.tag == \"subtitling\") {\n        _this.props.history.push(\"/dashboard/buyer/service/subtitling/uploadform/userlist/\".concat(video_id));\n      }\n\n      if (_this.state.tag == \"tagging\") {\n        _this.props.history.push(\"/dashboard/buyer/service/tagging/uploadform/userlist/\".concat(video_id));\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(VOD, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var email = localStorage.getItem('username');\n      this.setState({\n        email: email\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUpload();\n    }\n  }, {\n    key: \"pause\",\n    value: function pause() {\n      // Show resume, hide pause\n      $('.resumable-progress .progress-resume-link').show();\n      $('.resumable-progress .progress-pause-link').hide();\n    }\n  }, {\n    key: \"cancel\",\n    value: function cancel() {\n      $('.resumable-file-progress').html('canceled');\n    }\n  }, {\n    key: \"redirectHandler\",\n    value: function redirectHandler() {\n      var video_id = document.getElementById('video_id').value;\n      this.setState({\n        video_id: video_id,\n        nextComponent: true\n      }); // this.props.history.push(`/upload/description/${video_id}`);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"resumable-error\",\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Resumable not supported\"), React.createElement(\"div\", {\n        class: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"resumable-drop\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        id: \"file_upload_button\",\n        class: \"mt-16\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"btn btn-success fileinput-button\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        class: \"glyphicon glyphicon-plus\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-success fileinput-button\",\n        id: \"resumable-browse\",\n        \"data-url\": \"\".concat(CHUNK_UPLOAD_SERVICE, \"/\").concat(this.state.email),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, \"Select Files\")))), React.createElement(Link, {\n        to: \"/dashboard/buyer/service/\".concat(this.state.tag, \"/myorders\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-warning\",\n        \"aria-label\": \"Pause upload\",\n        id: \"cancel-upload-btn\",\n        style: {\n          display: \"none\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"glyphicon glyphicon-pause \",\n        \"aria-hidden\": \"true\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), \" Cancel upload\"))), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"col-lg-offset-2 col-lg-12\",\n        id: \"progress_bar_status\",\n        style: {\n          display: 'none'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(Progress, {\n        percent: this.state.percentage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        id: \"show_percentage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }))), React.createElement(\"div\", {\n        class: \"col-md-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"ul\", {\n        id: \"file-upload-list\",\n        class: \"list-styled\",\n        style: {\n          display: \"none\",\n          backgroundColor: 'rgba(0,0,0,0.1)',\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        type: \"hidden\",\n        id: \"video_id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        class: \"btn btn-primary pull-right\",\n        id: \"save_button\",\n        style: {\n          display: 'none'\n        },\n        onClick: this.formContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, \"Next\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), this.state.nextComponent && React.createElement(VIDEODESCRIPTION, {\n        video_id: this.state.video_id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return VOD;\n}(Component);\n\nexport default withRouter(VOD); // {this.state.showTable && <Paging total={this.state.total} clicked={this.pagingContent.bind(this)} first={this.state.first} rows={this.state.rows} search={this.state.search}/>}","map":{"version":3,"sources":["/var/www/html/REACT_WORK/planetshare_web/src/container/Dashboard_Container/chunkupload/resumable.js"],"names":["React","Component","axios","$","Link","withRouter","Resumable","Progress","VIDEODESCRIPTION","CHUNK_UPLOAD_SERVICE","uploadPercentage","VOD","state","percentage","video_id","showTable","tableContent","nextComponent","email","tag","getUpload","window","props","setState","$fileUpload","hide","$fileUploadDrop","$uploadList","length","resumable","chunkSize","fileType","simultaneousUploads","testChunks","throttleProgressCallbacks","maxFiles","target","data","query","_token","val","maxFilesErrorCallback","files","errorCount","console","log","maxFileSizeErrorCallback","file","click","addClass","removeClass","support","show","assignDrop","assignBrowse","on","append","uniqueIdentifier","html","fileName","upload","message","result","JSON","parse","Math","floor","progress","css","width","isUploading","pause","formContent","document","getElementById","value","history","push","localStorage","getItem","display","backgroundColor","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\nimport {Link,withRouter} from \"react-router-dom\";\nimport Resumable from 'resumablejs';\nimport Progress from './progressbar';\nimport VIDEODESCRIPTION from './videodescription';\nimport {CHUNK_UPLOAD_SERVICE} from '../../../url.js';\nconst uploadPercentage='0%';\nclass VOD extends Component {\n  state={\n    percentage:'',\n    video_id:'',\n    showTable:false,\n    tableContent:[],\n    nextComponent:false,\n    email:'',\n    tag:''\n\n  }\n  componentWillMount()\n  {\n    var email=localStorage.getItem('username');\n    this.setState({email:email});\n  }\n  componentDidMount()\n  {\n    this.getUpload();\n  }\n  getUpload=()=>{\n    var $ = window.$; // use the global jQuery instance\n    var tag=this.props.tag;\n    this.setState({tag:tag});\n  var $fileUpload = $('#resumable-browse');\n  $('#start-upload-btn').hide();\n    $('#pause-upload-btn').hide();\n    $('#cancel-upload-btn').hide();\n\n  var $fileUploadDrop = $('#resumable-drop');\n  var $uploadList = $(\"#file-upload-list\");\n  if ($fileUpload.length > 0 && $fileUploadDrop.length > 0) {\n      var resumable = new Resumable({\n\n          // Use chunk size that is smaller than your maximum limit due a resumable issue\n          // https://github.com/23/resumable.js/issues/51\n          chunkSize: 10 * 1024 * 1024, // 1MB\n          fileType: ['mp4','3gp','avi','flv'],\n          simultaneousUploads:1,\n          testChunks: false,\n          throttleProgressCallbacks: 1,\n          maxFiles:1,\n          // Get the url from data-url tag\n          target: $fileUpload.data('url'),\n          // Append token to the request - required for web routes\n          query:{_token : $('input[name=_token]').val(),tag:tag},\n          maxFilesErrorCallback(files, errorCount){ console.log(errorCount);},\n          maxFileSizeErrorCallback(file, errorCount){console.log(errorCount)}\n      });\n\n  // Resumable.js isn't supported, fall back on a different method\n  $('#resumable-browse').click(function()\n  {\n    $('#dubbing_cont').addClass('collapsed');\n    $('#dubbing_upload_button').removeClass('show');\n  })\n      if (!resumable.support) {\n          $('#resumable-error').show();\n      } else {\n          // Show a place for dropping/selecting files\n          $fileUploadDrop.show();\n          resumable.assignDrop($fileUpload[0]);\n          resumable.assignBrowse($fileUploadDrop[0]);\n\n          // Handle file add event\n\n          resumable.on('fileAdded', function (file) {\n              // Show progress pabr\n\n              $fileUpload.hide();\n              $uploadList.show();\n              $('#progress_bar_status').show()\n\n              $('#file_upload_button').hide()\n              // $('#start-upload-btn').show();\n                $('#pause-upload-btn').show();\n                $('#cancel-upload-btn').show();\n              // Show pause, hide resume\n              $('.resumable-progress .progress-resume-link').hide();\n              $('.resumable-progress .progress-pause-link').show();\n              // Add the file to the list\n              $uploadList.append('<li class=\"resumable-file-' + file.uniqueIdentifier + '\">Uploading <span class=\"resumable-file-name\"></span> <span class=\"resumable-file-progress\"></span>');\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-name').html(file.fileName);\n              // Actually start the upload\n                              // console.log(file);\n              resumable.upload();\n          });\n\n          resumable.on('fileSuccess', function (file, message) {\n            var result=JSON.parse(message);\n            $('#video_id').val(result.video_id);\n\n            $('#start-upload-btn').hide();\n            $('#pause-upload-btn').hide();\n            $('#cancel-upload-btn').hide();\n            $('#progress_bar_status').hide();\n            $('#file_upload_button').show();\n            $('#progress_bar_status').hide()\n            $('#save_button').show();\n              $fileUpload.show();\n\n\n              // Reflect that the file upload has completed\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(completed)');\n          });\n          resumable.on('fileError', function (file, message) {\n              // Reflect that the file upload has resulted in error\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html('(file could not be uploaded: ' + message + ')');\n          });\n          resumable.on('fileProgress', function (file) {\n              // Handle progress for both the file and the overall upload\n              $('.resumable-file-' + file.uniqueIdentifier + ' .resumable-file-progress').html(Math.floor(file.progress() * 100) + '%');\n              $('.progress-bar').css({width: Math.floor(resumable.progress() * 100) + '%'});\n              $('#hidden_percent').val(Math.floor(file.progress() * 100));\n              $('#show_percentage').html(Math.floor(file.progress() * 100)+'%');\n             // uploadPercentage=Math.floor(file.progress() * 100) + '%';\n              // this.setState({percentage:'10'});\n          });\n      }\n      $('#pause-upload-btn').click(function(){\n        $('#pause-upload-btn').hide();\n        $('#start-upload-btn').show();\n          if (resumable.files.length>0) {\n              if (resumable.isUploading()) {\n                return  resumable.pause();\n              }\n              return resumable.upload();\n          }\n      });\n      $('#start-upload-btn').click(function(){\n                $('#start-upload-btn').hide();\n                  $('#pause-upload-btn').show();\n          resumable.upload();\n      });\n\n  }\n}\n\npause(){\n // Show resume, hide pause\n $('.resumable-progress .progress-resume-link').show();\n $('.resumable-progress .progress-pause-link').hide();\n}\ncancel(){\n$('.resumable-file-progress').html('canceled');\n}\nredirectHandler()\n{\n  var video_id=document.getElementById('video_id').value;\n  this.setState({video_id:video_id,nextComponent:true})\n  // this.props.history.push(`/upload/description/${video_id}`);\n}\nformContent=()=>{\n  var video_id=document.getElementById('video_id').value;\n  this.setState({video_id:video_id,nextComponent:true});\n  if(this.state.tag==\"dubbing\")\n  {\n      this.props.history.push(`/dashboard/buyer/service/dubbing/uploadform/userlist/${video_id}`);\n  }\n  if(this.state.tag==\"transcoding\")\n  {\n      this.props.history.push(`/dashboard/buyer/service/transcoding/uploadform/userlist/${video_id}`);\n  }\n  if(this.state.tag==\"subtitling\")\n  {\n      this.props.history.push(`/dashboard/buyer/service/subtitling/uploadform/userlist/${video_id}`);\n  }\n  if(this.state.tag==\"tagging\")\n  {\n      this.props.history.push(`/dashboard/buyer/service/tagging/uploadform/userlist/${video_id}`);\n  }\n}\n  render() {\n    return (\n      <div>\n\n    <div class=\"text-center\" >\n        <div id=\"resumable-error\" style={{display: \"none\"}}>\n            Resumable not supported\n        </div>\n        <div class=\"col-md-12\">\n        <div id=\"resumable-drop\">\n        <div id=\"file_upload_button\" class=\"mt-16\">\n        <span class=\"btn btn-success fileinput-button\">\n            <i class=\"glyphicon glyphicon-plus\"></i>\n             <button type=\"button\" class=\"btn btn-success fileinput-button\" id=\"resumable-browse\" data-url={`${CHUNK_UPLOAD_SERVICE}/${this.state.email}`} >Select Files</button>\n        </span>\n        </div>\n        </div>\n        <Link to={`/dashboard/buyer/service/${this.state.tag}/myorders`}><button type=\"button\" class=\"btn btn-warning\" aria-label=\"Pause upload\" id=\"cancel-upload-btn\" style={{display: \"none\"}}>\n            <span class=\"glyphicon glyphicon-pause \" aria-hidden=\"true\"></span> Cancel upload\n        </button></Link>\n        {/*<button type=\"button\" class=\"btn btn-warning\" aria-label=\"Pause upload\" id=\"pause-upload-btn\" style={{display: \"none\"}}>\n            <span class=\"glyphicon glyphicon-pause \" aria-hidden=\"true\"></span> Pause upload\n        </button>\n        <button type=\"button\" class=\"btn btn-info\" aria-label=\"Start upload\" id=\"start-upload-btn\" style={{display: \"none\"}}>\n            <span class=\"glyphicon glyphicon-upload\" aria-hidden=\"true\"></span> Start upload\n        </button>*/}\n        </div>\n        <br/>\n <div class=\"col-lg-offset-2 col-lg-12\" id=\"progress_bar_status\" style={{display:'none'}}>\n     <p>\n     <Progress  percent={this.state.percentage}/>\n     <div id=\"show_percentage\" ></div>\n     </p>\n\n </div>\n <div class=\"col-md-12\">\n <ul id=\"file-upload-list\" class=\"list-styled\"  style={{display: \"none\",backgroundColor:'rgba(0,0,0,0.1)', color:'black'}}>\n </ul>\n </div>\n <input type=\"hidden\" id=\"video_id\"/>\n <button class=\"btn btn-primary pull-right\" id=\"save_button\" style={{display:'none'}} onClick={this.formContent}>Next</button>\n</div>\n  <br/>\n    <br/>\n      {this.state.nextComponent && <VIDEODESCRIPTION video_id={this.state.video_id}/>}\n            </div>\n        )\n\n      }\n    }\nexport default withRouter(VOD);\n// {this.state.showTable && <Paging total={this.state.total} clicked={this.pagingContent.bind(this)} first={this.state.first} rows={this.state.rows} search={this.state.search}/>}\n"]},"metadata":{},"sourceType":"module"}
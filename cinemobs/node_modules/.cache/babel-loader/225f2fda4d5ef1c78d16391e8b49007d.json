{"ast":null,"code":"var _jsxFileName = \"/var/www/html/REACT_WORK/playflix/src/container/PhoneLogin/PhoneLoginotp.js\";\nimport React from 'react';\nimport OtpInput from \"react-otp-input\";\nimport axios from 'axios';\nimport { LOGIN, COUNTRYCODE, PARTNER_ID, GET_TOKEN, USERID, UUID } from '../../url';\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport Loader from 'react-loader-spinner';\nimport $ from 'jquery';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { ToastContainer, toast, cssTransition } from 'react-toastify';\nconst Zoom = cssTransition({\n  enter: 'zoomIn',\n  exit: 'zoomOut',\n  duration: 750\n});\n\nclass PhoneLoginOtp extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      OTP: '',\n      otpShow: '',\n      warning: false,\n      isSubmit: false,\n      waitLogin: false,\n      timer: 30,\n      intervalId: ''\n    };\n\n    this.startTimer = () => {\n      if (this.state.timer > 0) {\n        this.setState({\n          timer: this.state.timer - 1\n        });\n      } else {\n        clearInterval(this.state.intervalId);\n      }\n    };\n\n    this.formSubmit = async e => {\n      e.preventDefault();\n      clearInterval(this.state.intervalId);\n      this.setState({\n        isSubmit: true\n      });\n      var formData = new FormData();\n      formData.append('country', COUNTRYCODE);\n      formData.append('partnerid', PARTNER_ID);\n      formData.append('os', 'linux');\n      formData.append('uuid', UUID);\n      formData.append('tag', 'verify');\n      formData.append('name', 'web');\n      formData.append('type', 'web');\n      formData.append('mobile', this.props.mobile_num);\n      formData.append('authprovider', 'web');\n      formData.append('otp', this.state.OTP);\n      let response = await axios.post(LOGIN, formData, {\n        headers: {\n          'token': this.props.token\n        }\n      }); //console.log(response);\n\n      if (response.data.status == '1') {\n        this.props.openSignup(response.data.userid);\n      }\n\n      if (response.data.status == '2') {\n        localStorage.setItem('userid', response.data.userid);\n        localStorage.setItem('token', this.props.token);\n        this.setState({\n          waitLogin: true\n        });\n        setTimeout(() => this.props.history.push('/'), 2000);\n      } else {\n        this.setState({\n          warning: true,\n          isSubmit: false\n        });\n      }\n    };\n\n    this.handleChange = otp => {\n      if (otp.toString().length <= 6) {\n        this.setState({\n          OTP: otp.toString()\n        });\n      }\n    };\n\n    this.sendOTP = () => {\n      clearInterval(this.state.intervalId);\n      var formData = new FormData();\n      formData.append('userid', USERID);\n      formData.append('country', COUNTRYCODE);\n      formData.append('partnerid', PARTNER_ID);\n      formData.append('os', 'linux');\n      formData.append('uuid', UUID);\n      formData.append('tag', 'generate');\n      formData.append('name', 'web');\n      formData.append('type', 'web');\n      formData.append('mobile', this.props.mobile_num);\n      formData.append('authprovider', 'web');\n      axios.post(LOGIN, formData, {\n        headers: {\n          'token': this.props.token\n        }\n      }).then(response => {\n        if (response.data.status == 1) {\n          toast(\"OTP has been send\", {\n            transition: Zoom\n          });\n          this.setState({\n            timer: 30\n          }, function () {\n            var intervalId = setInterval(() => this.startTimer(), 1000);\n            this.setState({\n              intervalId: intervalId\n            });\n          });\n        }\n      }).catch(error => {\n        console.log(error);\n      });\n    };\n  }\n\n  componentDidMount() {\n    var intervalId = setInterval(this.startTimer, 1000);\n    this.setState({\n      intervalId: intervalId\n    });\n  }\n\n  componentDidUnMount() {\n    clearInterval(this.state.intervalId);\n  }\n\n  render() {\n    if (!this.state.waitLogin) {\n      return React.createElement(\"div\", {\n        class: \"mobnum mobotp\",\n        id: \"mobile_number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(ToastContainer, {\n        autoClose: 1000,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        class: \"popup_l\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"images/popup_logo.png\",\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      })), React.createElement(\"form\", {\n        onSubmit: this.formSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"fields phn\",\n        style: {\n          minWidth: \"275px\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"OTP Verification!\"), React.createElement(\"p\", {\n        class: \"otp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Enter the OTP you received to \", React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, this.props.mobile_num)), React.createElement(\"p\", {\n        style: {\n          color: 'red',\n          cursor: 'pointer'\n        },\n        onClick: () => {\n          this.props.openMobile();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Signin with different number\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(OtpInput, {\n        onChange: otp => this.handleChange(otp),\n        numInputs: 6,\n        isInputNum: true,\n        value: this.state.OTP,\n        separator: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, \"-\"),\n        shouldAutoFocus: true,\n        inputStyle: {\n          width: '45px',\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"resendotp\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        class: \"timer\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, \"00:00:\", this.state.timer), this.state.timer == 0 && React.createElement(\"button\", {\n        type: \"button\",\n        class: \"btn btn-resend\",\n        onClick: () => this.sendOTP(),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, \"Resend OTP\")), React.createElement(\"p\", {\n        class: \"signotp\",\n        onClick: () => {\n          this.props.openMobile();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Signin with different number\"))), this.state.warning && React.createElement(\"span\", {\n        class: \"valid_error\",\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Incorrect OTP\"), !this.state.isSubmit && React.createElement(\"div\", {\n        class: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        disabled: this.state.OTP.length == 6 ? false : true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Continue\")), this.state.isSubmit && React.createElement(\"div\", {\n        class: \"buttons\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        disabled: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, \"Loading....\")), React.createElement(\"div\", {\n        class: \"clearfix\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      })));\n    } else {\n      return React.createElement(\"div\", {\n        class: \"mobnum login_load\",\n        id: \"mobile_number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        class: \"popup_l\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"images/popup_logo.png\",\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      })), React.createElement(Loader, {\n        type: \"Rings\",\n        color: \"#9012cd\",\n        height: 100,\n        width: 100,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, \"Signing In ,Please Wait\"));\n    }\n  }\n\n}\n\nexport default PhoneLoginOtp;","map":{"version":3,"sources":["/var/www/html/REACT_WORK/playflix/src/container/PhoneLogin/PhoneLoginotp.js"],"names":["React","OtpInput","axios","LOGIN","COUNTRYCODE","PARTNER_ID","GET_TOKEN","USERID","UUID","Loader","$","ToastContainer","toast","cssTransition","Zoom","enter","exit","duration","PhoneLoginOtp","Component","state","OTP","otpShow","warning","isSubmit","waitLogin","timer","intervalId","startTimer","setState","clearInterval","formSubmit","e","preventDefault","formData","FormData","append","props","mobile_num","response","post","headers","token","data","status","openSignup","userid","localStorage","setItem","setTimeout","history","push","handleChange","otp","toString","length","sendOTP","then","transition","setInterval","catch","error","console","log","componentDidMount","componentDidUnMount","render","minWidth","color","cursor","openMobile","width"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,EAAcC,WAAd,EAA0BC,UAA1B,EAAqCC,SAArC,EAA+CC,MAA/C,EAAsDC,IAAtD,QAAiE,WAAjE;AACC,OAAO,+DAAP;AACC,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,CAAP,MAAc,QAAd;AACA,OAAO,uCAAP;AACA,SAASC,cAAT,EAAyBC,KAAzB,EAA+BC,aAA/B,QAAmD,gBAAnD;AACA,MAAMC,IAAI,GAAGD,aAAa,CAAC;AAC3BE,EAAAA,KAAK,EAAE,QADoB;AAE3BC,EAAAA,IAAI,EAAE,SAFqB;AAG3BC,EAAAA,QAAQ,EAAE;AAHiB,CAAD,CAA1B;;AAKF,MAAMC,aAAN,SAA4BlB,KAAK,CAACmB,SAAlC,CAA2C;AAAA;AAAA;AAAA,SACzCC,KADyC,GACnC;AAACC,MAAAA,GAAG,EAAC,EAAL;AAAQC,MAAAA,OAAO,EAAC,EAAhB;AAAmBC,MAAAA,OAAO,EAAC,KAA3B;AAAiCC,MAAAA,QAAQ,EAAC,KAA1C;AAAgDC,MAAAA,SAAS,EAAC,KAA1D;AAAgEC,MAAAA,KAAK,EAAC,EAAtE;AAAyEC,MAAAA,UAAU,EAAC;AAApF,KADmC;;AAAA,SAQzCC,UARyC,GAQ9B,MAAI;AACf,UAAG,KAAKR,KAAL,CAAWM,KAAX,GAAiB,CAApB,EACI;AACF,aAAKG,QAAL,CAAc;AAACH,UAAAA,KAAK,EAAC,KAAKN,KAAL,CAAWM,KAAX,GAAiB;AAAxB,SAAd;AACD,OAHD,MAIK;AACFI,QAAAA,aAAa,CAAC,KAAKV,KAAL,CAAWO,UAAZ,CAAb;AACF;AACD,KAhByC;;AAAA,SAqBzCI,UArByC,GAqB9B,MAAOC,CAAP,IAAW;AACpBA,MAAAA,CAAC,CAACC,cAAF;AACCH,MAAAA,aAAa,CAAC,KAAKV,KAAL,CAAWO,UAAZ,CAAb;AACD,WAAKE,QAAL,CAAc;AAACL,QAAAA,QAAQ,EAAC;AAAV,OAAd;AACA,UAAIU,QAAQ,GAAC,IAAIC,QAAJ,EAAb;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA0BhC,WAA1B;AACA8B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA4B/B,UAA5B;AACA6B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAqB,OAArB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB5B,IAAvB;AACA0B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAsB,QAAtB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB,KAAvB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB,KAAvB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyB,KAAKC,KAAL,CAAWC,UAApC;AACAJ,MAAAA,QAAQ,CAACE,MAAT,CAAgB,cAAhB,EAA+B,KAA/B;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAsB,KAAKhB,KAAL,CAAWC,GAAjC;AACA,UAAIkB,QAAQ,GAAE,MAAMrC,KAAK,CAACsC,IAAN,CAAWrC,KAAX,EAAiB+B,QAAjB,EAA0B;AAACO,QAAAA,OAAO,EAAC;AAAC,mBAAQ,KAAKJ,KAAL,CAAWK;AAApB;AAAT,OAA1B,CAApB,CAfoB,CAgBnB;;AACC,UAAGH,QAAQ,CAACI,IAAT,CAAcC,MAAd,IAAsB,GAAzB,EACA;AACA,aAAKP,KAAL,CAAWQ,UAAX,CAAsBN,QAAQ,CAACI,IAAT,CAAcG,MAApC;AACC;;AACD,UAAGP,QAAQ,CAACI,IAAT,CAAcC,MAAd,IAAsB,GAAzB,EAA6B;AAC3BG,QAAAA,YAAY,CAACC,OAAb,CAAqB,QAArB,EAA8BT,QAAQ,CAACI,IAAT,CAAcG,MAA5C;AACAC,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6B,KAAKX,KAAL,CAAWK,KAAxC;AACA,aAAKb,QAAL,CAAc;AAACJ,UAAAA,SAAS,EAAC;AAAX,SAAd;AACJwB,QAAAA,UAAU,CAAC,MAAI,KAAKZ,KAAL,CAAWa,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,CAAL,EAAkC,IAAlC,CAAV;AACG,OALD,MAMI;AACF,aAAKtB,QAAL,CAAc;AAACN,UAAAA,OAAO,EAAC,IAAT;AAAcC,UAAAA,QAAQ,EAAC;AAAvB,SAAd;AACD;AAEJ,KApDwC;;AAAA,SAqDzC4B,YArDyC,GAqD3BC,GAAD,IAAO;AACjB,UAAIA,GAAG,CAACC,QAAJ,GAAeC,MAAf,IAAuB,CAA3B,EACA;AACC,aAAK1B,QAAL,CAAc;AAACR,UAAAA,GAAG,EAACgC,GAAG,CAACC,QAAJ;AAAL,SAAd;AAAoC;AACpC,KAzDqC;;AAAA,SA0DtCE,OA1DsC,GA0D9B,MAAI;AACV1B,MAAAA,aAAa,CAAC,KAAKV,KAAL,CAAWO,UAAZ,CAAb;AACA,UAAIO,QAAQ,GAAC,IAAIC,QAAJ,EAAb;AACAD,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyB7B,MAAzB;AACA2B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA0BhC,WAA1B;AACA8B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,WAAhB,EAA4B/B,UAA5B;AACA6B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,IAAhB,EAAqB,OAArB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB5B,IAAvB;AACA0B,MAAAA,QAAQ,CAACE,MAAT,CAAgB,KAAhB,EAAsB,UAAtB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB,KAAvB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAuB,KAAvB;AACAF,MAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyB,KAAKC,KAAL,CAAWC,UAApC;AACAJ,MAAAA,QAAQ,CAACE,MAAT,CAAgB,cAAhB,EAA+B,KAA/B;AACAlC,MAAAA,KAAK,CAACsC,IAAN,CAAWrC,KAAX,EAAiB+B,QAAjB,EAA0B;AACtBO,QAAAA,OAAO,EAAE;AACP,mBAAS,KAAKJ,KAAL,CAAWK;AADb;AADa,OAA1B,EAIKe,IAJL,CAIWlB,QAAD,IAAY;AAClB,YAAGA,QAAQ,CAACI,IAAT,CAAcC,MAAd,IAAsB,CAAzB,EACA;AACGhC,UAAAA,KAAK,CAAC,mBAAD,EAAqB;AAAE8C,YAAAA,UAAU,EAAE5C;AAAd,WAArB,CAAL;AACD,eAAKe,QAAL,CAAc;AAACH,YAAAA,KAAK,EAAC;AAAP,WAAd,EAAyB,YAAU;AAClC,gBAAIC,UAAU,GAAEgC,WAAW,CAAC,MAAI,KAAK/B,UAAL,EAAL,EAAwB,IAAxB,CAA3B;AACA,iBAAKC,QAAL,CAAc;AAACF,cAAAA,UAAU,EAAEA;AAAb,aAAd;AACA,WAHD;AAID;AACF,OAbH,EAaKiC,KAbL,CAaYC,KAAD,IAAS;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD,OAfH;AAgBD,KAvFqC;AAAA;;AAEzCG,EAAAA,iBAAiB,GACjB;AAEI,QAAIrC,UAAU,GAAEgC,WAAW,CAAC,KAAK/B,UAAN,EAAkB,IAAlB,CAA3B;AACA,SAAKC,QAAL,CAAc;AAACF,MAAAA,UAAU,EAAEA;AAAb,KAAd;AACH;;AAUFsC,EAAAA,mBAAmB,GACnB;AACEnC,IAAAA,aAAa,CAAC,KAAKV,KAAL,CAAWO,UAAZ,CAAb;AACD;;AAoEAuC,EAAAA,MAAM,GACN;AACE,QAAG,CAAC,KAAK9C,KAAL,CAAWK,SAAf,EACA;AACA,aAAO;AAAK,QAAA,KAAK,EAAC,eAAX;AAA2B,QAAA,EAAE,EAAC,eAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACP,oBAAC,cAAD;AAAgB,QAAA,SAAS,EAAE,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADO,EAEP;AAAK,QAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAC,uBAAT;AAAiC,QAAA,GAAG,EAAC,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFO,EAKP;AAAO,QAAA,QAAQ,EAAE,KAAKM,UAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAK,QAAA,KAAK,EAAC,YAAX;AAAwB,QAAA,KAAK,EAAE;AAACoC,UAAAA,QAAQ,EAAE;AAAX,SAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BADJ,EAEI;AAAG,QAAA,KAAK,EAAC,KAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2CAA6C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAO,KAAK9B,KAAL,CAAWC,UAAlB,CAA7C,CAFJ,EAGI;AAAG,QAAA,KAAK,EAAE;AAAC8B,UAAAA,KAAK,EAAC,KAAP;AAAaC,UAAAA,MAAM,EAAC;AAApB,SAAV;AAA0C,QAAA,OAAO,EAAE,MAAI;AAAC,eAAKhC,KAAL,CAAWiC,UAAX;AAAwB,SAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAHJ,EAmBM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,oBAAC,QAAD;AACE,QAAA,QAAQ,EAAGjB,GAAD,IAAQ,KAAKD,YAAL,CAAkBC,GAAlB,CADpB;AAEE,QAAA,SAAS,EAAE,CAFb;AAGE,QAAA,UAAU,EAAE,IAHd;AAIE,QAAA,KAAK,EAAE,KAAKjC,KAAL,CAAWC,GAJpB;AAKE,QAAA,SAAS,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eALb;AAME,QAAA,eAAe,EAAE,IANnB;AAOE,QAAA,UAAU,EAAE;AAACkD,UAAAA,KAAK,EAAC,MAAP;AAAcH,UAAAA,KAAK,EAAC;AAApB,SAPd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADL,CAnBN,EA8BS;AAAK,QAAA,KAAK,EAAC,WAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACD;AAAM,QAAA,KAAK,EAAC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAA2B,KAAKhD,KAAL,CAAWM,KAAtC,CADC,EAEA,KAAKN,KAAL,CAAWM,KAAX,IAAkB,CAAlB,IAAuB;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,KAAK,EAAC,gBAA5B;AAA6C,QAAA,OAAO,EAAE,MAAI,KAAK8B,OAAL,EAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFvB,CA9BT,EAkCO;AAAG,QAAA,KAAK,EAAC,SAAT;AAAmB,QAAA,OAAO,EAAE,MAAI;AAAC,eAAKnB,KAAL,CAAWiC,UAAX;AAAwB,SAAzD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA2D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wCAA3D,CAlCP,CADJ,EAqCK,KAAKlD,KAAL,CAAWG,OAAX,IAAsB;AAAM,QAAA,KAAK,EAAC,aAAZ;AAA0B,QAAA,KAAK,EAAE;AAAC6C,UAAAA,KAAK,EAAC;AAAP,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBArC3B,EAuCO,CAAC,KAAKhD,KAAL,CAAWI,QAAZ,IAAwB;AAAK,QAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACvB;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,QAAQ,EAAG,KAAKJ,KAAL,CAAWC,GAAX,CAAekC,MAAhB,IAAyB,CAAzB,GAA2B,KAA3B,GAAiC,IAAjE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADuB,CAvC/B,EA0CK,KAAKnC,KAAL,CAAWI,QAAX,IAAuB;AAAK,QAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACpB;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,QAAQ,MAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBADoB,CA1C5B,EA6CI;AAAK,QAAA,KAAK,EAAC,UAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA7CJ,CALO,CAAP;AAqDD,KAvDC,MAwDG;AACH,aAAO;AAAK,QAAA,KAAK,EAAC,mBAAX;AAA+B,QAAA,EAAE,EAAC,eAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACP;AAAK,QAAA,KAAK,EAAC,SAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAK,QAAA,GAAG,EAAC,uBAAT;AAAiC,QAAA,GAAG,EAAC,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CADO,EAIP,oBAAC,MAAD;AACI,QAAA,IAAI,EAAC,OADT;AAEI,QAAA,KAAK,EAAC,SAFV;AAGI,QAAA,MAAM,EAAE,GAHZ;AAII,QAAA,KAAK,EAAE,GAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJO,EAWN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAXM,CAAP;AAaD;AACA;;AAjKwC;;AAmK3C,eAAeN,aAAf","sourcesContent":["import React from 'react';\nimport OtpInput from \"react-otp-input\";\nimport axios from 'axios';\nimport {LOGIN,COUNTRYCODE,PARTNER_ID,GET_TOKEN,USERID,UUID} from '../../url';\n import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n  import Loader from 'react-loader-spinner';\n  import $ from 'jquery';\n  import 'react-toastify/dist/ReactToastify.css';\n  import { ToastContainer, toast,cssTransition} from 'react-toastify';\n  const Zoom = cssTransition({\n  enter: 'zoomIn',\n  exit: 'zoomOut',\n  duration: 750,\n  });\nclass PhoneLoginOtp extends React.Component{\n  state={OTP:'',otpShow:'',warning:false,isSubmit:false,waitLogin:false,timer:30,intervalId:''}\n  componentDidMount()\n  {\n\n      var intervalId =setInterval(this.startTimer, 1000);\n      this.setState({intervalId: intervalId});\n  }\n  startTimer=()=>{\n  if(this.state.timer>0)\n      {\n    this.setState({timer:this.state.timer-1})\n  }\n  else {\n     clearInterval(this.state.intervalId);\n  }\n }\n componentDidUnMount()\n {\n   clearInterval(this.state.intervalId);\n }\n  formSubmit=async (e)=>{\n    e.preventDefault();\n     clearInterval(this.state.intervalId);\n    this.setState({isSubmit:true})\n    var formData=new FormData();\n    formData.append('country',COUNTRYCODE);\n    formData.append('partnerid',PARTNER_ID);\n    formData.append('os','linux');\n    formData.append('uuid',UUID);\n    formData.append('tag','verify');\n    formData.append('name','web');\n    formData.append('type','web');\n    formData.append('mobile',this.props.mobile_num);\n    formData.append('authprovider','web');\n    formData.append('otp',this.state.OTP);\n    let response= await axios.post(LOGIN,formData,{headers:{'token':this.props.token}});\n     //console.log(response);\n      if(response.data.status=='1')\n      {\n      this.props.openSignup(response.data.userid)\n      }\n      if(response.data.status=='2'){\n        localStorage.setItem('userid',response.data.userid)\n        localStorage.setItem('token',this.props.token)\n        this.setState({waitLogin:true})\n    setTimeout(()=>this.props.history.push('/'),2000);\n      }\n      else{\n        this.setState({warning:true,isSubmit:false})\n      }\n\n  }\n  handleChange=(otp)=>{\n     if (otp.toString().length<=6)\n     {\n      this.setState({OTP:otp.toString()})}\n     }\n     sendOTP=()=>{\n       clearInterval(this.state.intervalId);\n       var formData=new FormData();\n       formData.append('userid',USERID);\n       formData.append('country',COUNTRYCODE);\n       formData.append('partnerid',PARTNER_ID);\n       formData.append('os','linux');\n       formData.append('uuid',UUID);\n       formData.append('tag','generate');\n       formData.append('name','web');\n       formData.append('type','web');\n       formData.append('mobile',this.props.mobile_num);\n       formData.append('authprovider','web');\n       axios.post(LOGIN,formData,{\n           headers: {\n             'token': this.props.token\n           }\n         }).then((response)=>{\n           if(response.data.status==1)\n           {\n              toast(\"OTP has been send\",{ transition: Zoom,});\n             this.setState({timer:30},function(){\n              var intervalId =setInterval(()=>this.startTimer(), 1000);\n              this.setState({intervalId: intervalId});\n             })\n           }\n         }).catch((error)=>{\n           console.log(error);\n         })\n     }\n  render()\n  {\n    if(!this.state.waitLogin)\n    {\n    return(<div class=\"mobnum mobotp\" id=\"mobile_number\">\n    <ToastContainer autoClose={1000}/>\n    <div class=\"popup_l\">\n      <img src=\"images/popup_logo.png\" alt=\"\" />\n    </div>\n    <form  onSubmit={this.formSubmit}>\n        <div class=\"fields phn\" style={{minWidth: \"275px\"}}>\n            <h2>OTP Verification!</h2>\n            <p class=\"otp\">Enter the OTP you received to <span>{this.props.mobile_num}</span></p>\n            <p style={{color:'red',cursor:'pointer'}} onClick={()=>{this.props.openMobile()}}>Signin with different number</p>\n            {/*<div class=\"field otp\">\n              <div class=\"inputbox\">\n                <span><input type=\"text\" alt=\"\" /></span>\n                <span><input type=\"text\" alt=\"\" /></span>\n                <span><input type=\"text\" alt=\"\" /></span>\n                <span><input type=\"text\" alt=\"\" /></span>\n                <span><input type=\"text\" alt=\"\" /></span>\n                <span><input type=\"text\" alt=\"\" /></span>\n              </div>\n            </div>\n            <div class=\"otptime\">\n              <a href=\"javascript:;\" class=\"backbtn\">Resend OTP</a>\n              <span>00:60</span>\n              </div>*/}\n              {/*<input type=\"text\" name=\"mycode\" id=\"pincode-input1\"/>*/}\n              <div>\n                   <OtpInput\n                     onChange={(otp) =>this.handleChange(otp)}\n                     numInputs={6}\n                     isInputNum={true}\n                     value={this.state.OTP}\n                     separator={<span>-</span>}\n                     shouldAutoFocus={true}\n                     inputStyle={{width:'45px',color:'black'}}\n                   />\n                 </div>\n                 <div class=\"resendotp\">\n                <span class=\"timer\">00:00:{this.state.timer}</span>\n                {this.state.timer==0 && <button type=\"button\" class=\"btn btn-resend\" onClick={()=>this.sendOTP()}>Resend OTP</button>}\n               </div>\n               <p class=\"signotp\" onClick={()=>{this.props.openMobile()}}><span>Signin with different number</span></p>\n        </div>\n        {this.state.warning && <span class=\"valid_error\" style={{color:'red'}}>Incorrect OTP</span>}\n        \n          {!this.state.isSubmit && <div class=\"buttons\">\n            <button type=\"submit\" disabled={(this.state.OTP.length)==6?false:true}>Continue</button>\n        </div>}\n        {this.state.isSubmit && <div class=\"buttons\">\n            <button type=\"submit\" disabled>Loading....</button>\n        </div>}\n        <div class=\"clearfix\"></div>\n    </form>\n    </div>)\n  }\n  else {\n    return(<div class=\"mobnum login_load\" id=\"mobile_number\">\n    <div class=\"popup_l\">\n      <img src=\"images/popup_logo.png\" alt=\"\" />\n    </div>\n    <Loader\n        type=\"Rings\"\n        color=\"#9012cd\"\n        height={100}\n        width={100}\n\n     />\n     <p>Signing In ,Please Wait</p>\n  </div>)\n  }\n  }\n}\nexport default PhoneLoginOtp;\n"]},"metadata":{},"sourceType":"module"}